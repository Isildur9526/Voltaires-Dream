#Alsatian missions
#contributed and coded by FrenchKnight

vn_als_missions_slot_1 = {
    slot = 6
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = ALS
			tag = SSF
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_als_pioneer_the_printing_press = {
        icon = expand_the_confederacy
        position = 1
        required_missions = {  }
        trigger = {
            has_institution = printing_press
            if = {
                limit = { has_dlc = "Rule Britannia" }
                innovativeness = 50
            }
            university = 3
            has_3_lv3_advisors_trigger = yes            
        }
        effect = {
            add_innovativeness_big_effect = yes
            add_country_modifier = {
                name = als_pioneer_the_printing_press_mission #technology/idea cost
                duration = -1
            }            
        }
	}
    vn_als_legacy_of_martin_bucer = {
        icon = mission_luther_theses
        position = 3
        required_missions = { vn_als_pioneer_the_printing_press }
        trigger = {
			OR = {
				current_age = age_of_absolutism
				current_age = age_of_revolutions
				current_age = age_of_ideology
			}
            alsace_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				has_owner_religion = yes				
			}
        }
        effect = {
            add_country_modifier = {
                name = als_legacy_of_martin_bucer_mission #tolerance own, stability cost
                duration = 9125
            }              
        }
    }
    vn_als_route_des_vins_dalsace = {
        icon = austria_prospers
        position = 4
        required_missions = { vn_als_develop_colmer }
        trigger = {
			calc_true_if = {
				alsace_region = {
					type = all
					trade_goods = wine
					development = 20
				}
				amount = 5
			}	
            home_trade_node = {
				is_strongest_trade_power = ROOT
			}
			if = {
				limit = { has_dlc = "Dharma" }
				any_owned_province = {
					province_has_center_of_trade_of_level = 3
				}    
			}           
        }
        effect = {
            add_country_modifier = {
                name = als_route_des_vins_dalsace_mission #production efficiency
                duration = 9125
            }             
        }
    }
}

vn_als_missions_slot_2 = {
    slot = 7
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = ALS
			tag = SSF
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_als_unite_the_decapole = {
        icon = unite_the_league
        position = 2
        required_missions = { vn_als_dethrone_the_bishops }
		provinces_to_highlight = {
            area = sundgau_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            sundgau_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
			add_country_modifier = {
				name = "als_unite_the_decapole_mission" #Legitimacy/Prestige
				duration = 9125
			}          
        }
    }
    vn_als_develop_colmer = {
        icon = ansbach_succession
        position = 3
        required_missions = { vn_als_unite_the_decapole }
        provinces_to_highlight = {
            province_id = 37
        }
        trigger = {
            37 = {
				owned_by = ROOT
				has_fort_trigger = yes
				development = 20
				NOT = { num_free_building_slots = 1 }
			}            
        }
        effect = {
            if = {
				limit = {
					37 = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
				}
				37 = {
					center_of_trade = 1
				}
			}
			else_if = {
				limit = {
					37 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				37 = {
					add_center_of_trade_level = 1
				}
			}
			else = {
				37 = { add_base_production = 2 }
			}
			37 = {
				add_province_modifier = {
					name = als_develop_colmer_mission
					duration = 9125
				}
			}          
        }
    }
    vn_als_cross_the_rhine = {
        icon = develop_the_po_valley
        position = 4
        required_missions = { vn_als_rot_un_wiss }
		provinces_to_highlight = {
            region = baden_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            baden_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
			add_country_modifier = {
				name = "als_cross_the_rhine_mission" #Trade
				duration = 9125
			}  
			custom_tooltip = vn_als_cross_the_rhine.tt #Unite Alamannia!
			hidden_effect = {
				wurttemburg_region = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
						culture_group = germanic
					}
					add_permanent_claim = ROOT
				}
				swabia_region = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
						culture_group = germanic
					}
					add_permanent_claim = ROOT
				}
				swisseast_region = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
						culture_group = germanic
					}
					add_permanent_claim = ROOT
				}
				swisswest_region = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
						culture_group = germanic
					}
					add_permanent_claim = ROOT
				}
			}             
        }
    }
}

vn_als_missions_slot_3 = {
    slot = 8
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = ALS
			tag = SSF
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_als_dethrone_the_bishops = {
        icon = the_great_city_of_buda
        position = 1
        required_missions = {  }
		provinces_to_highlight = {
            area = strassburg_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			NOT = { government = theocracy }
            strassburg_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   
            if = {
				limit = { has_estate = estate_church }
				estate_loyalty = {
					estate = estate_church
					loyalty = 50
				}
				NOT = {
					estate_influence = {
						estate = estate_church
						influence = 50
					}
				}
			}			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
            alsace_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }            
        }
    }
    vn_als_consolidate_the_vosges = {
        icon = take_the_bishoprics
        position = 2
        required_missions = { vn_als_dethrone_the_bishops }
		provinces_to_highlight = {
            area = nordgau_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            nordgau_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
			add_country_modifier = {
				name = "als_consolidate_the_vosges_mission" #Defensiveness, Garrison Size
				duration = 9125
			}          
        }
    }
    vn_als_rot_un_wiss = {
        icon = develop_our_capital
        position = 3
        required_missions = { vn_als_consolidate_the_vosges }
		provinces_to_highlight = {
            region = alsace_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            alsace_region = {
				type = all
				owned_by = ROOT
				consolidated_region_trigger = yes
			}
			calc_true_if = {
				alsace_region = {
					type = all
					development = 20
				}
				amount = 5
			}			
        }
        effect = {
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 20
			}
            lorraine_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }  
			baden_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }  
			add_country_modifier = {
				name = "als_rot_un_wiss_mission" #Consolidation
				duration = 9125
			}
        }
    }
}

vn_als_missions_slot_4 = {
    slot = 9
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = ALS
			tag = SSF
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_als_to_the_saar = {
        icon = imperial_capitals
        position = 2
        required_missions = { vn_als_dethrone_the_bishops }
		provinces_to_highlight = {
            area = hagenau_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            hagenau_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
			add_country_modifier = {
				name = "als_to_the_saar_mission" #Tax Income
				duration = 9125
			}              
        }
    }
    vn_als_possessions_in_lorraine = {
        icon = integrate_lorraine
        position = 4
        required_missions = { vn_als_rot_un_wiss }
		provinces_to_highlight = {
            region = lorraine_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            lorraine_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}   			
        }
        effect = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
			add_country_modifier = {
				name = "als_possessions_in_lorraine_mission" #Conquest
				duration = 9125
			}              
        }
    }
}

vn_als_missions_slot_5 = {
    slot = 10
    generic = no
    ai = yes
    potential = {
		OR = {
			tag = ALS
			tag = SSF
		}
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_als_the_true_language = {
        icon = imperial_ascendancy
        position = 1
        required_missions = {  }
        trigger = {
			primary_culture = boden_alemannic
			grown_by_development = 50
            num_of_owned_provinces_with = {
				value = 25
				culture = boden_alemannic
			}
            employed_advisor = {
                culture = ROOT
                category = ADM
            }
            employed_advisor = {
                culture = ROOT
                category = DIP
            }
            employed_advisor = {
                culture = ROOT
                category = MIL
            } 			
        }
        effect = {
			add_country_modifier = {
				name = "als_the_true_language_mission" #Culture Conversion
				duration = 9125
			}              
        }
    }
    vn_als_develop_strasbourg = {
        icon = eastern_catholicization
        position = 2
        required_missions = { vn_als_dethrone_the_bishops }
        provinces_to_highlight = {
            province_id = 1959
        }
        trigger = {
            1959 = {
				owned_by = ROOT
				has_fort_trigger = yes
				development = 30
				NOT = { num_free_building_slots = 1 }
				if = {
					limit = { has_dlc = "Dharma" }
					province_has_center_of_trade_of_level = 3
				}
			}
        }
        effect = {
			add_mercantilism = 5
			1959 = {
				add_province_modifier = {
					name = als_fortify_strasbourg_mission #Local trade and development
					duration = -1
				}
			}            
        }
    }
    vn_als_drive_out_the_habsburgs = {
        icon = humiliate_austria
        position = 3
        required_missions = { vn_als_develop_strasbourg }
        trigger = {
			OR = {
				548 = {
					owner = {
						OR = {
							alliance_with = ROOT
							has_opinion = {
								who = ROOT
								value = 150
							}
						}
					}
				}
				owns_or_non_sovereign_subject_of = 2172
			}            
        }
        effect = {
			add_prestige = 10
			add_legitimacy = 10
			if = {
				limit = {
					exists = HAB
					valid_for_personal_unions_trigger = yes
					HAB = { valid_for_personal_unions_trigger = yes }	
				}
				add_casus_belli = {
					target = HAB
					type = cb_fabricated_claims
					months = 300
				}				
			}
			else_if = {
				limit = {
					exists = EAH
					valid_for_personal_unions_trigger = yes
					EAH = { valid_for_personal_unions_trigger = yes }	
				}
				add_casus_belli = {
					target = EAH
					type = cb_fabricated_claims
					months = 300
				}			
			}
			else = {
				austria_region = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}            
        }
    }
    vn_als_free_from_the_empire = {
        icon = influence_the_princes
        position = 4
        required_missions = { vn_als_drive_out_the_habsburgs }
        trigger = {
            OR = {
				NOT = { hre_size = 1 }
				is_elector = yes
				is_emperor = yes
			}
        }
        effect = {
			add_country_modifier = {
				name = "als_free_from_the_empire_mission" #Diplomacy
				duration = 9125
			}            
        }
    }
}