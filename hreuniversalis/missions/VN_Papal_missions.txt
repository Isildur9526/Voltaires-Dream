#Papal missions
#by ShyGuy13

vn_pap_missions_slot_1 = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        tag = PAP
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pap_expedition_to_barbastro = {
        icon = mission_turning_the_tables
        position = 1
        required_missions = {  }
        provinces_to_highlight = {
            owner = {
                NOT = { tag = ROOT }
                capital_scope = {
                    superregion = iberia_superregion
                }
                religion = catholic
                NOT = {
                    has_opinion = {
                        who = ROOT
                        value = 100
                    }
                }
            }
        }
        trigger = {
            calc_true_if = {
                desc = vn_pap_expedition_to_barbastro.tt
                all_country = {
                    capital_scope = {
                        superregion = iberia_superregion
                    }
                    religion = catholic
                    has_opinion = {
                        who = ROOT
                        value = 100
                    }
                }
                amount = 3
            }
        }
        effect = {
            custom_tooltip = emp_pap_back_the_catholic_powers_league_tt
            hidden_effect = {
                every_country = {
                    limit = {
                        NOT = { tag = ROOT }
                        capital_scope = {
                            superregion = iberia_superregion
                        }
                        religion = catholic
                        has_opinion = {
                            who = ROOT
                            value = 100
                        }
                    }
                    country_event = {
                        id = vn_missions.40
                    }
                }
            }
        }
    }
    vn_pap_sanction_the_reconquista = {
        icon = king_of_aragon
        position = 2
        required_missions = { vn_pap_expedition_to_barbastro }
        trigger = {
            
        }
        effect = {
            #
        }
    }
    vn_pap_christian_iberia = {
        icon = a_question_of_spain
        position = 3
        required_missions = { vn_pap_sanction_the_reconquista }
        provinces_to_highlight = {
            superregion = iberia_superregion
            owner = {
                NOT = { religion_group = christian }
            }
        }
        trigger = {
            iberia_superregion = {
                type = all
                owner = {
                    religion_group = christian
                }
            }
        }
        effect = {
            add_prestige = 25
        }
    }
    vn_pap_missionaries_to_sweden = {
        icon = catholic_confraternity
        position = 4
		required_missions = {  }
		provinces_to_highlight = {
            if = {
                limit = { exists = SWE }
                owned_by = SWE
            }
            else = {
                region = gotaland_region
                NOT = { religion = catholic }
            }
		}
        trigger = {
            if = {
				limit = {
					exists = SWE
                }
                OR = {
                    SWE = {
                        religion = catholic
                        has_opinion = {
                            who = ROOT
                            value = 100
                        }
                    }
                    SWE = {
                        NOT = { religion = catholic }
                        NOT = { num_of_cities = 75 }
                    }
                }
			}
			else = {
				gotaland_region = {
					type = all
					religion = catholic
				}
			}
        }
        effect = {
            custom_tooltip = vn_pap_missionaries_to_sweden.tt
            hidden_effect = {
                every_country = {
                    limit = {
                        NOT = { tag = ROOT }
                        capital_scope = {
                            superregion = scandinavia_superregion
                        }
                        religion = catholic
                    }
                    country_event = { id = flavor_pap.12 }
                }
            }
			add_prestige = 10
        }
    }
    vn_pap_northern_crusades = {
        icon = mission_crusade
        position = 5
        required_missions = { vn_pap_missionaries_to_sweden }
        provinces_to_highlight = {
            if = {
                limit = { NOT = { has_global_flag = danzig_delivered } }
                province_id = 402
            }
            if = {
                limit = { NOT = { has_global_flag = riga_delivered } }
                province_id = 5793
            }
        }
        trigger = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = vn_pap_northern_crusades.tt
                    has_global_flag = danzig_delivered
                }
                custom_trigger_tooltip = {
                    tooltip = vn_pap_northern_crusades.ss
                    has_global_flag = riga_delivered
                }
            }
        }
        effect = {
            add_army_tradition = 20
            if = {
				limit = { has_dlc = "Emperor" TEU = { religion = catholic } }
				TEU = {
					country_event = { id = flavor_pap.12 }
				}
            }
            else = {
                TEU = {
                    add_papal_influence = 25
                }
            }
            if = {
				limit = { has_dlc = "Emperor" LIV = { religion = catholic } }
				LIV = {
					country_event = { id = flavor_pap.12 }
                }
			}
            else = {
                LIV = {
                    add_papal_influence = 25
                }
            }
        }
    }
    vn_pap_european_christianization = {
        icon = spread_piety
        position = 6
        required_missions = { vn_pap_northern_crusades }
        provinces_to_highlight = {
            continent = europe
            NOT = { religion_group = christian }
        }
        trigger = {
            calc_true_if = {
                desc = vn_pap_european_christianization.tt
                all_province = {
                    continent = europe
                    religion_group = christian
                }
                amount = 3500
            }
        }
        effect = {
            add_country_modifier = {
                name = pap_european_christianization_mission
                duration = -1
            }
        }
    }
    vn_pap_milites_christianus = {
        #icon = 
        position = 7
        required_missions = {  }
        trigger = {
            army_size = 25
            num_of_generals = 2
            land_maintenance = 1
        }
        effect = {
            add_army_professionalism = 0.03
        }
	}
    vn_pap_form_the_inquistion = {
        icon = support_the_orders
        position = 10
        required_missions = { vn_pap_milites_christianus }
        trigger = {
            is_religion_enabled = waldensian
            is_religion_enabled = cathar
            is_religion_enabled = fraticelli
        }
        effect = {
            country_event = {
                id = fbievents.74
            }
        }
    }
    vn_pap_weather_the_reformation = {
        icon = victor_for_the_true_faith
        position = 11
        required_missions = { vn_pap_form_the_inquistion }
        trigger = {
            is_religion_enabled = protestant
            is_religion_enabled = reformed
        }
        effect = {
            
        }
    }
    vn_pap_council_of_trent = {
        icon = counter_reformation
        position = 12
        required_missions = { vn_pap_weather_the_reformation }
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_pap_league_wars = {
        icon = back_the_league
        position = 13
        required_missions = { vn_pap_council_of_trent }
        trigger = {
           
        }
        effect = {
            
        }
    }
    vn_pap_catholic_italy = {
        icon = rule_italy
        position = 14
        required_missions = { vn_pap_league_wars }
        provinces_to_highlight = {
            OR = {
                superregion = italy_superregion
                superregion = sicily_superregion
            }
            NOT = { religion = catholic }
        }
        trigger = {
            italy_superregion = {
                type = all
                religion = catholic
            }
            sicily_superregion = {
                type = all
                religion = catholic
            }
        }
        effect = {
            
        }
	}
}

vn_pap_missions_slot_2 = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        tag = PAP
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pap_supremacy_and_infallibility = {
        icon = answer_the_roman_question
        position = 2
        required_missions = { vn_pap_in_nomine_domini }
        trigger = {
            OR = {
                is_part_of_hre = no
                is_elector = yes
            }
            has_institution = investiture
            NOT = { war_with = emperor }
        }
        effect = {
            add_devotion = 5
            add_legitimacy = 5
            if = {
                limit = { NOT = { adm = 6 } }
                change_adm = 1
            }
            else = { add_adm_power = 50 }
            if = {
                limit = { NOT = { dip = 6 } }
                change_dip = 1
            }
            else = { add_dip_power = 50 }
            if = {
                limit = { NOT = { mil = 6 } }
                change_mil = 1
            }
            else = { add_mil_power = 50 }
        }
    }
    vn_pap_apulian_diplomacy = {
        icon = holy_state
        position = 3
        required_missions = {  }
		provinces_to_highlight = {
			
		}
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_pap_influence_the_electors = {
        icon = influence_the_princes
        position = 5
        required_missions = { vn_pap_guelphs_and_ghibellines }
        provinces_to_highlight = {
            owner = {
                NOT = { tag = ROOT }
                is_elector = yes
                NOT = {
                    has_opinion = {
						who = ROOT
						value = 100
					}
                }
            }
        }
        trigger = {
            if = {
                limit = {
                    hre_size = 1
                }
                calc_true_if = {
                    amount = 5
                    all_elector = {
                        has_opinion = {
                            who = ROOT
                            value = 100
                        }
                    }
                }
            }
			else = {
                total_development = 750
            }
        }
        effect = {
            #emperor = {
				#event decreasing his chance for next emperor
			#}
        }
    }
    vn_pap_italian_emperorship = {
        icon = invest_in_the_provinces
        position = 6
        required_missions = { vn_pap_influence_the_electors vn_pap_guelphian_victory }
        trigger = {
            if = {
                limit = {
                    hre_size = 1
                }
                emperor = {
                    culture_group = latin
                    capital_scope = {
                        OR = {
                            superregion = italy_superregion
                            superregion = sicily_superregion
                        }
                    }
                }
            }
            else = {
                total_development = 1000
            }
        }
        effect = {
            
        }
    }
    vn_pap_council_of_clermont = {
        icon = shield_of_christianity
        position = 7
        required_missions = {  }
        trigger = {
            NOT = { current_age = age_of_empire }
            custom_trigger_tooltip = {
                tooltip = vn_pap_council_of_clermont.tt
                OR = {
                    is_in_war = {
                        casus_belli = cb_grand_crusade
                        war_score = 25
                    }
                    is_in_war = {
                        casus_belli = cb_grand_heretic
                        war_score = 25
                    }
                }
            }
        }
        effect = {
            add_prestige = 15
            add_mil_power = 50
            every_country = {
                limit = {
                    NOT = { tag = ROOT }
                    religion = catholic
                    NOT = { war_with = ROOT }
                    OR = {
                        is_in_war = {
                            casus_belli = cb_grand_crusade
                        }
                        is_in_war = {
                            casus_belli = cb_grand_heretic
                        }
                    }
                }
                add_country_modifier = {
                    name = pap_council_of_clermont_mission
                    duration = 9125
                }
            }
        }
    }
    vn_pap_conquer_jerusalem = {
        icon = jerusalem
        position = 8
        required_missions = { vn_pap_council_of_clermont }
        provinces_to_highlight = {
            OR = {
                province_id = 4974
                province_id = 4920
                province_id = 3053
            }
            NOT = {
                owner = {
                    religion = catholic
                }
            }
        }
        trigger = {
            4974 = {
                owner = {
                    religion = catholic
                }
            }
            4920 = {
                owner = {
                    religion = catholic
                }
            }
            3053 = {
                owner = {
                    religion = catholic
                }
            }

        }
        effect = {
            custom_tooltip = vn_pap_conquer_jerusalem.tt
            hidden_effect = {
                every_country = {
                    limit = {
                        NOT = { tag = ROOT }
                        capital_scope = {
                            superregion = levant_superregion
                        }
                        religion = catholic
                    }
                    add_papal_influence = 25
                    #event for crusader states
                }
            }
        }
    }
    vn_pap_revive_christian_communities = {
        icon = levantine_missions
        position = 9
        required_missions = { vn_pap_conquer_jerusalem }
        provinces_to_highlight = {
            superregion = levant_superregion
            NOT = { religion = catholic }
        }
        trigger = {
            calc_true_if = {
                amount = 75
                desc = emp_pap_levantine_missions_tt
                all_province = {
                    superregion = levant_superregion
                    religion = catholic
                }
            }
        }
        effect = {
            
        }
    }
    vn_pap_cradle_of_christianity = {
        icon = convert_the_holy_lands
        position = 10
        required_missions = { vn_pap_revive_christian_communities }
        provinces_to_highlight = {
            
        }
        trigger = {
            
        }
        effect = {
            #add_country_modifier = {
            #    name = pap_cradle_of_christianity_mission
            #    duration = 9125
            #}
        }
    }
    vn_pap_combat_heresy = {
        icon = crush_heretic_strongholds
        position = 11
        required_missions = { vn_pap_form_the_inquistion }
        provinces_to_highlight = {
            
        }
        trigger = {
            calc_true_if = {
                amount = 5
                all_country = {
                    religion_group = ROOT
                    NOT = { religion = catholic }
                    ROOT = {
                        has_won_war_against = {
                            who = PREV
                            max_years_since = 50
                        }
                    }
                }
                desc = vn_pap_combat_heresy.tt
            }
        }
        effect = {
            
        }
    }
    vn_pap_pax_et_treuga_dei = {
        icon = peace_in_europe
        position = 12
        required_missions = { vn_pap_combat_heresy }
        provinces_to_highlight = {
            religion = catholic
            owner = { NOT = { religion = catholic } }
        }
        trigger = {
            if = {
                limit = { has_dlc = "Rights of Man" }
                is_great_power = yes
            }
            else = {
                num_of_cities = 250
            }
            if = {
                limit = { has_dlc = "Emperor" }
                is_defender_of_faith_of_tier = 5
            }
            else = {
                is_defender_of_faith = yes
            }
            custom_trigger_tooltip = {
                tooltip = vn_pap_pax_et_treuga_dei.tt
                NOT = {
                    any_province = {
                        religion = catholic
                        owner = { NOT = { religion = catholic } }
                    }
                }
            }
        }
        effect = {
            
        }
	}
}

vn_pap_missions_slot_3 = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        tag = PAP
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pap_in_nomine_domini = {
        icon = sway_the_pope
        position = 1
        required_missions = { vn_pap_in_nomine_domini }
        trigger = {
			legitimacy_equivalent = 90
            num_of_cardinals = 3
        }
        effect = {
            add_country_modifier = {
                name = pap_in_nomine_domini_mission
                duration = 9125
            }
        }
    }
    vn_pap_guelphs_and_ghibellines = {
        icon = the_italian_league
        position = 4
        required_missions = { vn_pap_in_nomine_domini }
        provinces_to_highlight = {
            if = {
                limit = { has_global_flag = guelph_ghib_enabled }
                owner = {
                    NOT = { tag = ROOT }
                    NOT = { alliance_with = ROOT }
                    has_ruler_modifier = guelph_ruler
                }
            }
            else = {
                always = no
            }
        }
        trigger = {
			custom_trigger_tooltip = {
				tooltip = vn_pap_guelphs_and_ghibellines.tt
				has_global_flag = guelph_ghib_enabled
            }
            calc_true_if = {
                amount = 3
                all_country = {
                    has_ruler_modifier = guelph_ruler
                    alliance_with = ROOT
                }
                desc = vn_pap_guelphs_and_ghibellines.ss
            }
        }
        effect = {
            
        }
    }
    vn_pap_guelphian_victory = {
        icon = centralized_empire
        position = 5
        required_missions = { vn_pap_guelphs_and_ghibellines }
        provinces_to_highlight = {
            owner = {
                is_emperor = yes
            }
        }
        trigger = {
            war_score_against = {
                who = emperor
                value = 25
            }
        }
        effect = {
            add_war_exhausion = -2
            add_power_projection = {
                type = mission_rewards_power_projection
                amount = 20
            }
        }
    }
    vn_pap_conquer_egypt = {
        icon = mission_arabian_fort
        position = 9
        required_missions = { vn_pap_conquer_jerusalem }
        provinces_to_highlight = {
            
        }
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_pap_conquer_tunis = {
        icon = crusader_fleet
        position = 10
        required_missions = { vn_pap_conquer_egypt }
        provinces_to_highlight = {
            
        }
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_pap_mission_to_the_mongols = {
        icon = mission_to_china
        position = 11
        required_missions = { vn_pap_cradle_of_christianity }
        trigger = {
            exists = ILK
            reverse_has_opinion = {
                who = ILK
                value = 100
            }
        }
        effect = {
            #ilk get event to become nestorian
        }
    }
}

vn_pap_missions_slot_4 = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        tag = PAP
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pap_conquer_latium = {
        icon = republican_yearnings
        position = 1
        required_missions = {  }
        provinces_to_highlight = {
            owned_by = LZO
        }
        trigger = {
            LZO = {
                OR = {
                    exists = no
                    is_subject_of = ROOT
                }
            }
        }
        effect = {
            spoleto_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_spoleto = {
        icon = fund_the_monasteries
        position = 2
        required_missions = { vn_pap_conquer_latium }
        provinces_to_highlight = {
            area = spoleto_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            spoleto_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            urbino_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            ancona_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_marche = {
        icon = dalmatian_conquest
        position = 3
        required_missions = { vn_pap_conquer_spoleto }
        provinces_to_highlight = {
            OR = {
                area = urbino_area
                area = ancona_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            urbino_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            ancona_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            tuscany_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_tuscany = {
        icon = mission_arts_and_letters
        position = 4
        required_missions = { vn_pap_conquer_marche }
        provinces_to_highlight = {
            region = tuscany_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 16
                region = tuscany_region
            }
        }
        effect = {
            liguria_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            piedmont_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_piedmont = {
        icon = unify_piedmont
        position = 5
        required_missions = { vn_pap_conquer_tuscany }
        provinces_to_highlight = {
            OR = {
                region = piedmont_region
                region = liguria_region
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 24
                OR = {
                    region = piedmont_region
                    region = liguria_region
                }
            }
        }
        effect = {
            lombardy_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_lombardy = {
        icon = seize_lombardy
        position = 6
        required_missions = { vn_pap_conquer_piedmont vn_pap_conquer_venetia }
        provinces_to_highlight = {
            region = lombardy_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 20
                region = lombardy_region
            }
        }
        effect = {
             
        }
    }
    vn_pap_empire_of_the_allmighty = {
        icon = kingdom_of_heaven
        position = 7
        required_missions = { vn_pap_conquer_lombardy }
        trigger = {
            num_of_cities = 250
            has_reform = kingdom_of_god_reform
        }
        effect = {
            
        }
    }
    vn_pap_conquer_constantinople = {
        icon = the_latin_empire
        position = 8
        required_missions = { }
        provinces_to_highlight = {
            province_id = 2233
        }
        trigger = {
            2233 = {
                owner = {
                    religion = catholic
                    is_subject = no
                }
            }
        }
        effect = {
            
        }
    }
    vn_pap_heal_the_schism = {
        icon = take_constantinople
        position = 10
        required_missions = { vn_pap_conquer_egypt }
        provinces_to_highlight = {
			OR = {
				province_id = 2233	#Constaninople
				province_id = 2708	#Vatican
				province_id = 4974	#Jerusalem
				province_id = 5022	#Alexandria
				province_id = 3053	#Antioch
			}
            OR = {
                NOT = { religion = catholic }
                owner = {
                    NOT = { religion = catholic }
                }
            }
		}
		trigger = {
			2233 = {
				religion = catholic
				owner = {
                    religion = catholic
                }
			}
			2708 = {
				religion = catholic
				owner = {
                    religion = catholic
                }
			}
			4974 = {
				religion = catholic
				owner = {
                    religion = catholic
                }
			}
			5022 = {
				religion = catholic
				owner = {
                    religion = catholic
                }
			}
			3053 = {
				religion = catholic
				owner = {
                    religion = catholic
                }
			}
		}
        effect = {
            add_devotion = 10
            add_legitimacy = 10
            if = {
                limit = { has_dlc = "Emperor" }
                custom_tooltip = emp_pap_end_the_schism_tt
                hidden_effect = {
                    every_country = {
                        limit = { 
                            religion = orthodox 
                            knows_country = PAP
                        }
                        country_event = { id = flavor_pap.11 }
                    }
                }
            }
            hidden_effect = {
                2233 = {
                    if = {
                        limit = {
                            NOT = {
                                has_building = monument
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        add_building = monument
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        remove_building = monument
                        add_building = temple
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = cathedral
                            }
                        }
                        remove_building = temple
                        add_building = cathedral
                    }
                    else = {
                        add_base_tax = 3
                    }
                }
                2708 = {
                    if = {
                        limit = {
                            NOT = {
                                has_building = monument
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        add_building = monument
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        remove_building = monument
                        add_building = temple
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = cathedral
                            }
                        }
                        remove_building = temple
                        add_building = cathedral
                    }
                    else = {
                        add_base_tax = 3
                    }
                }
                4974 = {
                    if = {
                        limit = {
                            NOT = {
                                has_building = monument
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        add_building = monument
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        remove_building = monument
                        add_building = temple
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = cathedral
                            }
                        }
                        remove_building = temple
                        add_building = cathedral
                    }
                    else = {
                        add_base_tax = 3
                    }
                }
                5022 = {
                    if = {
                        limit = {
                            NOT = {
                                has_building = monument
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        add_building = monument
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        remove_building = monument
                        add_building = temple
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = cathedral
                            }
                        }
                        remove_building = temple
                        add_building = cathedral
                    }
                    else = {
                        add_base_tax = 3
                    }
                }
                3053 = {
                    if = {
                        limit = {
                            NOT = {
                                has_building = monument
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        add_building = monument
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = temple
                                has_building = cathedral
                            }
                        }
                        remove_building = monument
                        add_building = temple
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_building = cathedral
                            }
                        }
                        remove_building = temple
                        add_building = cathedral
                    }
                    else = {
                        add_base_tax = 3
                    }
                }
            }
        }
    }
    vn_pap_establish_swiss_guard = {
        icon = form_the_swiss_guard
        position = 12
        required_missions = {  }
        trigger = {
            any_country = {
                primary_culture = swiss
                army_tradition = 50
                OR = {
                    alliance_with = ROOT
                    has_opinion = {
                        who = ROOT
                        value = 125
                    }
                }
            }
        }
        effect = {
            if = {
                limit = { has_dlc = "Emperor" }
                set_country_flag = pap_swiss_guard_mission_flag
                custom_tooltip = emp_pap_swiss_guard_mercs_enabled
                country_event = { id = papacy_events.1 }
            }
            add_army_tradition = 15
            add_mil_power = 25
        }
	}
}

vn_pap_missions_slot_5 = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        tag = PAP
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pap_papal_treasuries = {
        icon = mission_african_gold
        position = 1
        required_missions = {  }
        trigger = {
            if = {
				limit = {
					has_dlc = "Emperor"
				}
				curia_treasury_size = 2500
			}
			treasury = 500
        }
        effect = {
            add_inflation = -1
        }
    }
    vn_pap_catholic_splendour = {
        icon = italian_riches
        position = 2
        required_missions = { vn_pap_papal_treasuries }
        trigger = {
			if = {
				limit = { has_dlc = "Mandate of Heaven" }
				OR = {
					in_golden_age = yes
					has_had_golden_age = yes
				}
            }
            stability = 3
            prestige = 80
            is_in_deficit = no
            NOT = { num_of_loans = 1 }
        }
        effect = {
            #add_country_modifier = {
            #    name = pap_catholic_splendour_mission
            #    duration = 9125
            #}
        }
    }
    vn_pap_conquer_ferrara = {
        icon = secure_the_republic
        position = 4
        required_missions = { vn_pap_conquer_marche }
        provinces_to_highlight = {
            OR = {
                area = bologna_area
                area = cesena_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 12
                OR = {
                    area = bologna_area
                    area = cesena_area
                }
            }
        }
        effect = {
            
            treviso_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pap_conquer_venetia = {
        icon = mission_control_venice
        position = 5
        required_missions = { vn_pap_conquer_ferrara }
        provinces_to_highlight = {
            region = treviso_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 16
                region = treviso_region
            }
        }
        effect = {
            add_navy_tradition = 20
        }
    }
    vn_pap_a_courteous_gift = {
        icon = negotiate_for_avignon
        position = 6
        required_missions = {  }
        provinces_to_highlight = {
            province_id = 202
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { is_core = ROOT }
            }
        }
        trigger = {
            NOT = { current_age = age_of_empire }
            NOT = { current_age = age_of_holy_wars }
            NOT = { current_age = age_of_crisis }
            owns_core_province = 202
        }
        effect = {
            202 = {
                add_base_tax = 1
                add_base_production = 1
                add_base_production = 1
                add_province_modifier = {
                    name = pap_a_courteous_gift_mission
                    duration = 9125
                }
            }
        }
    }
    vn_pap_babylonian_captivity = {
        icon = sway_the_pope
        position = 7
        required_missions = { vn_pap_a_courteous_gift }
        trigger = {
            is_religion_enabled = catholique
            
        }
        effect = {
            #add_country_modifier = {
            #    name = pap_babylonian_captivity_mission
            #    duration = -1
            #}
        }
    }
    vn_pap_end_anti_papacy = {
        icon = spread_piety
        position = 8
        required_missions = { vn_pap_babylonian_captivity }
        trigger = {
            
        }
        effect = {
            # end the schism
        }
    }
    vn_pap_the_city_of_god = {
        icon = develop_our_capital
        position = 9
        required_missions = {  }
        provinces_to_highlight = {
            province_id = 2708
        }
        trigger = {
            2708 = {
                owned_by = ROOT
                num_of_times_improved_by_owner = 10
                num_of_buildings_in_province = 4
            }
        }
        effect = {
            custom_tooltip = vedic_education_tt
			hidden_effect = {
				if = {
					limit = {
						OR = {
                            AND = {
                                is_institution_enabled = feudalism
								NOT = { has_institution = feudalism }
                            }
                            AND = {
                                is_institution_enabled = investiture
								NOT = { has_institution = investiture }
                            }
                            AND = {
                                is_institution_enabled = universities
								NOT = { has_institution = universities }
                            }
                            AND = {
                                is_institution_enabled = guilds
								NOT = { has_institution = guilds }
                            }
                            AND = {
                                is_institution_enabled = chivalry
								NOT = { has_institution = chivalry }
                            }
                            AND = {
                                is_institution_enabled = publichealth
								NOT = { has_institution = publichealth }
                            }
                            AND = {
                                is_institution_enabled = laytheology
								NOT = { has_institution = laytheology }
                            }
							AND = {
								is_institution_enabled = renaissance
								NOT = { has_institution = renaissance }
							}
							AND = {
								is_institution_enabled = new_world_i
								NOT = { has_institution = new_world_i }
							}
							AND = {
								is_institution_enabled = printing_press
								NOT = { has_institution = printing_press }
							}
							AND = {
								is_institution_enabled = printing_press
								NOT = { has_institution = printing_press }
							}
							AND = {
								is_institution_enabled = global_trade
								NOT = { has_institution = global_trade }
							}
							AND = {
								is_institution_enabled = manufactories
								NOT = { has_institution = manufactories }
							}
							AND = {
								is_institution_enabled = enlightenment
								NOT = { has_institution = enlightenment }
							}
                            AND = {
                                is_institution_enabled = industrialism
								NOT = { has_institution = industrialism }
                            }
                            AND = {
                                is_institution_enabled = liberalism
								NOT = { has_institution = liberalism }
                            }
						}
					}
					capital_scope = {
						area = {
							add_next_institution_embracement = 25
						}
					}
				}
			}
            define_advisor = {
                type = theologian
                skill = 3
                cost_multiplier = 0.25
            }
        }
    }
    vn_pap_catholic_scholasticism = {
        icon = mission_rb_the_education_acts
        position = 10
        required_missions = { vn_pap_the_city_of_god }
        trigger = {
            has_institution = universities
			num_of_owned_provinces_with = {
				value = 5
				has_education_building_trigger = yes
                has_tax_building_trigger = yes
			}	
        }
        effect = {
            add_innovativeness_big_effect = yes
            add_country_modifier = {
                name = pap_catholic_scholasticism_mission
                duration = 9125
            }
        }
    }
    vn_pap_the_vatican_library = {
        icon = found_the_vatican_library
        position = 12
        required_missions = { vn_pap_catholic_scholasticism }
        provinces_to_highlight = {
            province_id = 2708
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { has_building = university }
                devastation = 1
                unrest = 1
            }
        }
        trigger = {
            monthly_adm = 10
            2708 = {
                owned_by = ROOT
                has_building = university
                NOT = { devastation = 1 }
                NOT = { unrest = 1 }
            }
        }
        effect = {
            if = {
				limit = { has_dlc = "Emperor" NOT = { has_country_flag = vatican_library_mission_flag } }
				set_country_flag = vatican_library_mission_flag
				country_event = {
					id = papacy_events.11
				}
			}
			else = {
				add_prestige = 10
			}
        }
    }
    vn_pap_sistine_chapel = {
        icon = new_st_peters_basilica
        position = 13
        required_missions = { vn_pap_the_vatican_library vn_pap_establish_swiss_guard }
        provinces_to_highlight = {
            province_id = 2708
            OR = {
                NOT = { owned_by = ROOT }
                NOT = { has_building = cathedral }
                devastation = 1
                unrest = 1
            }
        }
        trigger = {
            monthly_income = 50
            2708 = {
                owned_by = ROOT
                has_building = cathedral
                NOT = { devastation = 1 }
                NOT = { unrest = 1 }
            }
        }
        effect = {
            add_devotion = 10
            add_legitimacy = 10
            set_country_flag = improved_cathedrals_flag
            custom_tooltip = vn_pap_sistine_chapel.tt
        }
    }
    vn_pap_apostolic_authority = {
        icon = a_place_among_the_great_powers
        position = 14
        required_missions = { vn_pap_sistine_chapel }
        trigger = {
            has_completed_all_reforms_trigger = yes
            absolutism = 50
        }
        effect = {
            add_stability_or_adm_power = yes
            add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100
            add_country_modifier = {
                name = pap_apostolic_authority_mission
                duration = -1
            }
        }
	}	
}