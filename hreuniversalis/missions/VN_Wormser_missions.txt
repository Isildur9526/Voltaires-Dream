#Venetian Missions
#By ShyGuy13

vn_die_missions_slot_1 = {
	slot = 6
	generic = no
	ai = yes
	
    potential = {
        tag = DIE
        NOT = { has_reform = free_city }
        NOT = { map_setup = map_setup_random }
	}
    has_country_shield = yes
    
    vn_die_secure_loyalty = {
        position = 1
        icon = feast_of_pheasants
		required_missions = { }
		trigger = {
            if = {
                limit = { has_estate = estate_nobles }
                estate_loyalty = {
                    estate = estate_nobles
                    loyalty = 60
                }
            }
            if = {
                limit = { has_estate = estate_church }
                estate_loyalty = {
                    estate = estate_church
                    loyalty = 60
                }
            }
            if = {
                limit = { has_estate = estate_burghers }
                estate_loyalty = {
                    estate = estate_burghers
                    loyalty = 60
                }
            }
            if = {
                limit = { government = monarchy }
                calc_true_if = {
                    desc = gen_hre_electors.tooltip
                    all_elector = {
                        preferred_emperor = ROOT
                    }
                    amount = 3
                }
            }
            else = {
                num_of_allies = 4
            }
		}
		effect = {
            add_country_modifier = {
                name = die_secure_loyalty_mission
                duration = 9125
            }
		}
    }
    vn_die_saxon_rebellion = {
        position = 2
        icon = join_the_empire
        required_missions = { vn_die_secure_loyalty }
        provinces_to_highlight = {
            owner = {
                NOT = { tag = ROOT }
                is_elector = yes
                NOT = { alliance_with = ROOT }
                NOT = { is_subject = yes }
                NOT = {
                    ROOT = {
                        has_won_war_against = {
                            who = PREV
                            max_years_since = 50
                        }
                    }
                }
            }
        }
		trigger = {
            OR = {
                NOT = { exists = SAX }
                AND = {
                    alliance_with = SAX
                    reverse_has_opinion = {
                        who = SAX
                        value = 150
                    }
                }
                AND = {
                    num_of_cities = SAX
                    has_won_war_against = {
                        who = SAX
                        max_years_since = 25
                    }
                }
            }
        }
        effect = {
            add_power_projection = {
				type = mission_rewards_power_projection
				amount = 25
			}
            add_country_modifier = {
                name = die_saxon_rebellion_mission
                duration = 9125
            }
        }
    }
    vn_die_italian_alliances = {
        position = 4
        icon = catholic_confraternity
		required_missions = { vn_die_saxon_rebellion }
		trigger = {
            is_emperor = yes
            custom_trigger_tooltip = {
                tooltip = vn_die_italian_alliances.tt
                calc_true_if = {
                    amount = 3
                    all_ally = {
                        capital_scope = {
                            superregion = italy_superregion
                        }
                        has_opinion = {
                            who = ROOT
                            value = 150
                        }
                    }
                }
            }
		}
		effect = {
            add_dip_power = 50
            add_country_modifier = {
                name = die_italian_alliances_mission
                duration = 9125
            }
		}
    }
	vn_die_conquer_rome = {
		icon = the_italian_league
		required_missions = { vn_die_italian_alliances }
		provinces_to_highlight = {
			province_id = 2708
        }
        trigger = {
            is_emperor = yes
            2708 = {
                OR = {
                    owned_by = ROOT
                    controlled_by = ROOT
                }
            }
        }
		effect = {
			add_treasury = 200
            add_country_modifier = {
                name = die_conquer_rome_mission
                duration = 9125
            }
		}
    }
}

vn_die_missions_slot_2 = {
	slot = 7
	generic = no
	ai = yes
	
    potential = {
        tag = DIE
        NOT = { has_reform = free_city }
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes
    
    vn_die_connect_worms_and_speyer = {
        position = 1
        icon = mission_roads
        required_missions = { }
        provinces_to_highlight = {
            OR = {
                province_id = 2962
                province_id = 2405
                province_id = 2986
                province_id = 159
                province_id = 151
            }
            OR = {
                NOT = { owned_by = ROOT }
                has_trade_building_trigger = yes
            }
        }
		trigger = {
            2962 = {
                owned_by = ROOT
                has_trade_building_trigger = yes
            }
            2405 = {
                owned_by = ROOT
                has_trade_building_trigger = yes
            }
            2986 = {
                owned_by = ROOT
                has_trade_building_trigger = yes
            }
            159 = {
                owned_by = ROOT
                has_trade_building_trigger = yes
            }
            151 = {
                owned_by = ROOT
                has_trade_building_trigger = yes
            }
		}
		effect = {
            2962 = {
                add_province_modifier = {
                    name = die_connect_worms_and_speyer_mission
                    duration = 9125
                }
            }
            2405 = {
                add_province_modifier = {
                    name = die_connect_worms_and_speyer_mission
                    duration = 9125
                }
            }
            2986 = {
                add_province_modifier = {
                    name = die_connect_worms_and_speyer_mission
                    duration = 9125
                }
            }
            159 = {
                add_province_modifier = {
                    name = die_connect_worms_and_speyer_mission
                    duration = 9125
                }
            }
            151 = {
                add_province_modifier = {
                    name = die_connect_worms_and_speyer_mission
                    duration = 9125
                }
            }
		}
    }
    vn_die_construct_speyer_cathedral = {
        position = 2
		icon = connect_further_austria
		required_missions = { vn_die_connect_worms_and_speyer }
        provinces_to_highlight = {
            province_id = 151
        }
        trigger = {
			151 = {
                owned_by = ROOT
                controlled_by = ROOT
                NOT = { devastation = 1 }
                NOT = { unrest = 1 }
                num_of_times_improved = 10
            }
		}
		effect = {
			country_event = {
                id = vn_missions.30
            }
		}
    }
    vn_die_weaken_the_princes = {
        position = 3
        icon = unite_the_wittelsbachs
        required_missions = { vn_die_saxon_rebellion }
        provinces_to_highlight = {
            owner = {
                NOT = { tag = ROOT }
                is_elector = yes
            }
        }
		trigger = {
            is_emperor = yes
            if = {
                limit = { has_dlc = "Emperor" }
                hre_reform_passed = emperor_chrysobull
            }
            else = {
                hre_reform_passed = chrysobull
            }
            num_of_electors = 7
            custom_trigger_tooltip = {
                tooltip = vn_die_weaken_the_princes.tt
                all_elector = {
                    NOT = { tag = ROOT }
                    NOT = { total_development = ROOT }
                }
            }
		}
		effect = {
            add_imperial_influence = 25
            add_country_modifier = {
                name = die_weaken_the_princes_mission
                duration = 9125
            }
		}
    }
    vn_die_solve_the_investiture_controversy = {
        position = 5
        icon = holy_state
		required_missions = { vn_die_italian_alliances }
		trigger = {
            is_emperor = yes
            has_institution = investiture
            all_state_province = {
                investiture = 100
            }
            if = {
                limit = { religion = catholic }
                OR = {
                    AND = {
                        is_rival = PAP
                        PAP = { has_been_insulted_by_root = yes }
                    }
                    AND = {
                        alliance_with = PAP
                        reverse_has_opinion = {
                            who = PAP
                            value = 150
                        }
                    }
                }
            }
            else_if = {
                limit = { religion = catholique }
                AND = {
                    is_rival = AVI
                    PAP = { has_been_insulted_by_root = yes }
                }
                AND = {
                    alliance_with = AVI
                    reverse_has_opinion = {
                        who = PAP
                        value = 150
                    }
                }
            }
		}
		effect = {
            add_religious_influence_effect_small = yes
            add_country_modifier = {
                name = die_solve_the_investiture_controversy_mission
                duration = 9125
            }
		}
    }
}

vn_die_missions_slot_3 = {
	slot = 8
	generic = no
	ai = yes
	
    potential = {
        tag = DIE
        NOT = { has_reform = free_city }
        NOT = { map_setup = map_setup_random }
	}
    has_country_shield = yes

    vn_die_conquer_wormsgau = {
        position = 1
        icon = ansbach_succession
        required_missions = { }
        provinces_to_highlight = {
            OR = {
                area = mainz_area
                area = pfalzwest_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 14
                OR = {
                    area = mainz_area
                    area = pfalzwest_area
                }
            }
        }
        effect = {
            add_mercantilism = 2
            add_adm_power = 25
            darmstadt_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            metz_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            saar_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_die_conquer_metz = {
        position = 2
        icon = glory_to_turin
        required_missions = { vn_die_conquer_wormsgau }
        provinces_to_highlight = {
            OR = {
                area = metz_area
                area = saar_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                OR = {
                    area = metz_area
                    area = saar_area
                }
            }
		}
		effect = {
            add_prestige = 10
            barrois_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            toul_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_die_conquer_lorraine = {
        position = 4
        icon = integrate_lorraine
        required_missions = { vn_die_conquer_metz }
        provinces_to_highlight = {
            OR = {
                area = barrois_area
                area = toul_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 10
                OR = {
                    area = barrois_area
                    area = toul_area
                }
            }
		}
		effect = {
            add_prestige = 20
            burgundy_region = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            add_country_modifier = {
                name = die_conquer_lorraine_mission
                duration = 9125
            }
		}
    }
}

vn_die_missions_slot_4 = {
	slot = 9
	generic = no
	ai = yes
	
    potential = {
        tag = DIE
        NOT = { has_reform = free_city }
        NOT = { map_setup = map_setup_random }
	}
    has_country_shield = yes

    vn_die_conquer_erbach = {
        position = 2
        icon = mission_landsknecht_soldier
        required_missions = { vn_die_conquer_wormsgau }
        provinces_to_highlight = {
            area = darmstadt_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 6
                area = darmstadt_area
            }
		}
		effect = {
            add_adm_power = 50
            nurnburg_region = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
    }
    vn_die_conquer_franconia = {
        icon = conquer_franconia
        required_missions = { vn_die_conquer_erbach }
        provinces_to_highlight = {
            region = nurnburg_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 14
                region = nurnburg_region
            }
		}
		effect = {
            bavaria_region = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            add_country_modifier = {
                name = die_conquer_franconia_mission
                duration = 9125
            }
		}
    }
    vn_die_conquer_bavaria = {
        icon = imperial_capitals
        required_missions = { vn_die_conquer_franconia vn_die_conquer_swabia }
        provinces_to_highlight = {
            region = bavaria_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 20
                region = bavaria_region
            }
		}
		effect = {
            add_country_modifier = {
                name = die_conquer_bavaria_mission
                duration = 9125
            }
		}
    }
    vn_die_conquer_burgundy = {
        icon = carolingian_empire
        required_missions = { vn_die_conquer_bavaria vn_die_conquer_lorraine }
        provinces_to_highlight = {
            region = burgundy_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 18
                region = burgundy_region
            }
		}
		effect = {
            add_legitimacy = 25
            add_country_modifier = {
                name = die_conquer_burgundy_mission
                duration = 9125
            }
		}
    }
}

vn_die_missions_slot_5 = {
	slot = 10
	generic = no
	ai = yes
	
    potential = {
        tag = DIE
        NOT = { has_reform = free_city }
        NOT = { map_setup = map_setup_random }
	}
    has_country_shield = yes

    vn_die_feudal_obligations = {
        icon = rein_in_the_nobles
        required_missions = { }
		trigger = {
           army_size_percentage = 0.75
           legitimacy = 95
           stability = 2
           NOT = { average_autonomy = 50 }
           NOT = { average_unrest = 1 }
		}
		effect = {
            add_army_tradition = 10
            baden_region = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            pfalzeast_area = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
    }
    vn_die_conquer_baden = {
        icon = reclaim_the_ducal_lands
        required_missions = { vn_die_feudal_obligations }
        provinces_to_highlight = {
            OR = {
                region = baden_region
                area = pfalzeast_area
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 18
                OR = {
                    region = baden_region
                    area = pfalzeast_area
                }
            }
		}
		effect = {
            wurttemburg_region = {
                limit = {
                    NOT = { owned_by = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
		}
    }
    vn_die_conquer_swabia = {
        icon = control_swabia
        required_missions = { vn_die_conquer_baden }
        provinces_to_highlight = {
            region = wurttemburg_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT } 
        }
		trigger = {
            num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
                value = 14
                region = wurttemburg_region
            }
		}
		effect = {
            add_years_of_income = 0.15
            add_country_modifier = {
                name = die_conquer_swabia_mission
                duration = 9125
            }
		}
    }
}