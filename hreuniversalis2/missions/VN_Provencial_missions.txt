#Provencial Missions
#By Historyperson and Wiz

vn_pro_missions_slot_1 = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        tag = PRO
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes


    vn_pro_subjugate_toulouse = {
        icon = mission_unite_home_region
        position = 2
        required_missions = { vn_pro_provenca }
        provinces_to_highlight = {
            region = toulouse_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            toulouse_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            catalunya_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pro_catalan_union = {
        icon = mission_unite_home_region
        position = 3
        required_missions = { vn_pro_subjugate_toulouse }
        provinces_to_highlight = {
            region = catalunya_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            catalunya_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            valencian_region = { #Given we have a mission for conquering Muslim Iberia.
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pro_romanesque_and_gothic = {
        icon = mission_european_church
        position = 4
        required_missions = {  }
		provinces_to_highlight = {
			province_id = 991
		}
        trigger = {
            991 = {
                owned_by = ROOT
                OR = {
					has_building = temple
					has_building = cathedral			
				}
            }
			OR = {
				temple = 5
				cathedral = 5
			}
        }
        effect = {
			add_adm_power = 25
            add_country_modifier = {
                name = "pro_romanesque_and_gothic_mission"
                duration = 9125 
            }            
        }
    }
    vn_pro_avignon_papacy = {
        icon = mission_religious
        position = 5
        required_missions = { vn_pro_romanesque_and_gothic }
        trigger = {
            OR = {
                papal_influence = 50
                invested_papal_influence = 50
            }
            is_papal_controller = yes
        }
        effect = {
            add_country_modifier = {
                name = "pro_avignon_papacy_mission"
                duration = 18500 
            }
        }
    }
    vn_pro_trade_of_lyon = {
        icon = mission_hanseatic_city
        position = 6
        required_missions = { vn_pro_comte_de_vienne }
        provinces_to_highlight = {
            area = forez_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
			if = {
                limit = { has_dlc = "Dharma" }
            	541 = { province_has_center_of_trade_of_level = 3 }
			}
			else = {
				541 = {
					development = 30	
				}
			}
            forez_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            541 = {
				add_base_production = 2
                add_province_modifier = {
                    name = "pro_trade_of_lyon_mission"
                    duration = 9125 
                }
            }
            add_mercantilism = 5
            burgundy_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pro_comte_de_Bourgogne = {
        icon = mission_duchy
        position = 7
        required_missions = { vn_pro_up_the_rhone vn_pro_trade_of_lyon }
        provinces_to_highlight = {
            region = burgundy_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            burgundy_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = { 
            troyes_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            nevers_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            lorraine_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
}

vn_pro_missions_slot_2 = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        tag = PRO
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pro_provenca = {
        icon = mission_unite_home_region
        position = 1
        required_missions = {  }
        provinces_to_highlight = {
            OR = {
                area = forcalquier_area
                area = arles_area
            }  
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            forcalquier_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            arles_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            add_adm_power = 50
            add_dip_power = 50
            add_mil_power = 50
            toulouse_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            nice_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
            dauphine_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pro_comte_de_vienne = {
        icon = mission_duchy
        position = 5
        required_missions = { vn_pro_provenca }
        provinces_to_highlight = {
            area = dauphine_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            dauphine_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            dauphine_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }             
        }
    }
    vn_pro_up_the_rhone = {
        icon = mission_conquer_50_development
        position = 6
        required_missions = { vn_pro_comte_de_vienne }
        provinces_to_highlight = {
            area = savoy_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            savoy_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            swisswest_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }
        }
    }
    vn_pro_lands_of_the_zahringen = {
        icon = mission_european_church
        position = 7
        required_missions = { vn_pro_up_the_rhone }
        provinces_to_highlight = {
            region = swisswest_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            swisswest_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            swisseast_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }    
        }
    }
    vn_pro_regnum_arelatense = {
        icon = mission_empire
        position = 8
        required_missions = { vn_pro_lands_of_the_zahringen vn_pro_comte_de_Bourgogne }
        provinces_to_highlight = {
            OR = {
                region = burgundy_region
                region = swisswest_region
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            burgundy_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            swisswest_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = { 
            add_adm_power = 50
            add_dip_power = 50
            add_mil_power = 50   
            add_country_modifier = {
                name = "pro_regnum_arelatense_mission"
                duration = 9125 
            }      
        }
    }
    vn_pro_heir_to_lotharingia = {
        icon = mission_unite_home_region
        position = 8
        required_missions = { vn_pro_regnum_arelatense }
        provinces_to_highlight = {
            region = lorraine_region

            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            lorraine_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = { 
			add_adm_power = 100
			add_dip_power = 100
            add_mil_power = 100   
            add_country_modifier = {
                name = "pro_heir_to_lotharingia_mission"
                duration = -1 #!
            }      
        }
    }
}

vn_pro_missions_slot_3 = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        tag = PRO
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pro_terres_neuves = {
        icon = mission_unite_home_region
        position = 2
        required_missions = { vn_pro_provenca }
        provinces_to_highlight = {
            area = nice_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            nice_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
            liguria_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }             
        }
    }
    vn_pro_establish_consultates = {
        icon = mission_alliances
        position = 3
        required_missions = { vn_pro_terres_neuves }
        trigger = {
	    num_of_allies = 5
            all_ally = {
                has_opinion = {
                    who = ROOT
                    value = 150
                }
            }           
        }
        effect = {
            add_dip_power = 50
            add_country_modifier = {
                name = "pro_establish_consultates_mission"
                duration = 9125
            }            
        }
    }
    vn_pro_commercial_treaties = {
        icon = mission_alliances
        position = 4
        required_missions = { vn_pro_establish_consultates }
        trigger = {
            2671 = {
                is_strongest_trade_power = ROOT
            }
	        trade_income_percentage = 0.33
        }
        effect = {
            add_years_of_income = 0.1
	        add_dip_power = 100
        }
    }
    vn_pro_a_merchant_fleet = {
        icon = mission_dominate_home_trade_node
        position = 5
        required_missions = { vn_pro_commercial_treaties vn_pro_toulon_shipyard }
        trigger = {
			num_of_light_ship = 15
        }
        effect = {
			add_navy_tradition = 10 
			add_prestige = 10
			add_country_modifier = {
               	name = "pro_a_merchant_fleet_mission"
              	duration = 9125
            }
        }
    }
    vn_pro_genoa = {
        icon = mission_hanseatic_city
        position = 6
        required_missions = { vn_pro_a_merchant_fleet }
        provinces_to_highlight = {
            region = liguria_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            liguria_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {	
            2560 = {
				if = {
                    limit = {
	                has_dlc = "Dharma"
                        NOT = { province_has_center_of_trade_of_level = 3 }
                    }
                    add_center_of_trade_level = 1
				}
				else = {
					add_base_production = 2
				}
            }  
			piedmont_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }             
        }
    }
    vn_pro_italian_expansion = {
        icon = mission_war_chest
        position = 7
        required_missions = { vn_pro_genoa vn_pro_up_the_rhone }
        provinces_to_highlight = {
            region = piedmont_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            piedmont_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
		effect = {	          
			lombardy_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_claim = ROOT
            } 
            add_country_modifier = {
                name = "pro_italian_expansion_mission"
                duration = 9125 
            }              
        }
    }
}
 
vn_pro_missions_slot_4 = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        tag = PRO
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pro_lenga_doc = {
        icon = mission_noble_council
        position = 1
        required_missions = {  }
        trigger = {
            provence_region = {
                type = all
                culture = provencal
                country_or_non_sovereign_subject_holds = ROOT
            }            
        }
        effect = {
            add_country_modifier = {
                name = "pro_lenga_doc_mission"
                duration = 9125
            }               
        }
    }
    vn_pro_contest_poitiers = {
        icon = mission_conquer_50_development
        position = 2
        required_missions = { vn_pro_strategic_marriages }
        provinces_to_highlight = {
            area = poitou_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            poitou_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {
			aquitaine_region = { 
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_claim = ROOT
            }
            add_country_modifier = {
                name = pro_contest_poitiers_mission
                duration = 9125
            }
        }
    }
    vn_pro_toulon_shipyard = { 
        icon = mission_naval_expansion
        position = 4
        required_missions = {  }
        trigger = {
            num_of_admirals = 1 #From Venetian Missions
            2330 = {
                country_or_non_sovereign_subject_holds = ROOT
                OR = {
                    has_building = dock
                    has_building = drydock
                }
                OR = {
                    has_building = shipyard
                    has_building = grand_shipyard
                }
            }
        }
        effect = {
            2330 = {
                add_base_production = 2
            }
            add_navy_tradition = 10
            add_country_modifier = { #!
                name = "pro_toulon_shipyard_mission"
                duration = -1
            }
        }
    }
    vn_pro_provencal_navy = {
        icon = mission_establish_high_seas_navy
        position = 5
        required_missions = { vn_pro_toulon_shipyard }
        trigger = {
			navy_size = 30
			navy_size_percentage = 1
        }
        effect = {
			add_navy_tradition = 10
			add_prestige = 10
			add_country_modifier = {
               	name = "pro_provencal_navy_mission"
              	duration = 9125 
            }
        }
    }
    vn_pro_the_islands = {
        icon = mission_invade_island
        position = 6
        required_missions = { vn_pro_provencal_navy }
        provinces_to_highlight = {
            region = insular_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            insular_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {	          
			sicilia_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }            
        }
    }
    vn_pro_sicily = {
        icon = mission_sea_battles
        position = 7
        required_missions = { vn_pro_the_islands }
        provinces_to_highlight = {
            region = sicilia_region
            NOT = { country_or_non_sovereign_subject_holds = ROOT }          
        }
        trigger = {
            sicilia_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {	          
			apulia_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }   
			campania_region = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }          
        }
    }
    vn_pro_naples = {
        icon = mission_conquer_50_development
        position = 8
        required_missions = { vn_pro_sicily }
        provinces_to_highlight = {
            OR = {
                region = campania_region
                region = apulia_region
            }
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            campania_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
            apulia_region = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }
        }
        effect = {	          
	        messinia_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }   
	        achaea_area = {
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }          
        }
    }
    vn_pro_greek_expansion = {
        icon = mission_unite_home_region
        position = 9
        required_missions = { vn_pro_naples }
        provinces_to_highlight = {
            OR = {
                area = achaea_area
                area = messinia_area
            }
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            achaea_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
            messinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
	        morea_area = { #Different from Sicilian Ideas
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }  
            add_country_modifier = {
                name = "pro_greek_expansion_mission"
                duration = 9125
            }
        }
    }
} 

vn_pro_missions_slot_5 = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        tag = PRO
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_pro_strategic_marriages = {
        icon = mission_alliances
        position = 1
        required_missions = {  }
		trigger = {
			calc_true_if = {
				all_known_country = {
					marriage_with = ROOT
					total_development = 50
				}
				amount = 4
			}
		}
		effect = {
			poitou_area = { 
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
			angevin_region = { 
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}              
		}
	}
    vn_pro_the_dAnjou_holdings = {
        icon = mission_unite_home_region
        position = 2
        required_missions = { vn_pro_strategic_marriages }
        provinces_to_highlight = {
            region = angevin_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            angevin_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = { 
	        normandy_region = { 
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_claim = ROOT
            }
	        brittany_region = { 
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_claim = ROOT
            }
	        british_isles_superregion = { 
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_claim = ROOT
            }
            add_country_modifier = {
                name = "pro_the_dAnjou_holdings_mission"
                duration = 9125
            }
        }
    }
    vn_pro_angevin_domain = {
        icon = mission_unite_home_region
        position = 3
        required_missions = { vn_pro_the_dAnjou_holdings vn_pro_contest_poitiers}
        provinces_to_highlight = {
            OR = {
                superregion = british_isles_superregion
                region = brittany_region
                region = normandy_region
                region = aquitaine_region
            }
	        NOT = { country_or_non_sovereign_subject_holds = ROOT } 
        }
        trigger = {
            brittany_region = {
				type = any
				country_or_non_sovereign_subject_holds = ROOT
	        }   
            normandy_region = {
				type = any
				country_or_non_sovereign_subject_holds = ROOT
	        }    
            aquitaine_region = {
				type = any
				country_or_non_sovereign_subject_holds = ROOT
	        }      
            british_isles_superregion = {
				type = any
				country_or_non_sovereign_subject_holds = ROOT
	        }        
        }
        effect = {
            add_country_modifier = {
                name = "pro_angevin_domain_mission"
                duration = 9125
            }            
        }
    }
    vn_pro_crusader_dukes = {
        icon = mission_teutonic_knights
        position = 4
        required_missions = {  }
        trigger = {
            at_war_with_religious_enemy = yes
        }
        effect = {
	        balears_area = { 
                limit = {
                    NOT = { is_core = ROOT }
                    NOT = { is_permanent_claim = ROOT }
                }
                add_permanent_claim = ROOT
            }            
        }
    }
    vn_pro_revenge_on_the_saracens = {
        icon = mission_crusade_for_varna
        position = 6
        required_missions = { vn_pro_crusader_dukes vn_pro_provencal_navy }
        provinces_to_highlight = {
	    area = balears_area
            NOT = { country_or_non_sovereign_subject_holds = ROOT }
        }
        trigger = {
            balears_area = {
                type = all
                country_or_non_sovereign_subject_holds = ROOT
            }            
        }
        effect = {
            valencian_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
            iberia_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}             
        }
    }
    vn_pro_strike_their_core = {
        icon = mission_unite_home_region
        position = 8
        required_missions = { vn_pro_revenge_on_the_saracens }
        trigger = {
			num_of_owned_provinces_with = {
				value = 20
				OR = {
					culture_group = maghrebi
					culture_group = turko_semitic
				}
			}
        }
        effect = {
			add_adm_power = 100
			add_dip_power = 100
            add_mil_power = 100
            add_country_modifier = {
                name = "pro_strike_their_core_mission"
                duration = 9125
            }             
        }
    }
}