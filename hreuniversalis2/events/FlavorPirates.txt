###### DHE's to spawn pirate republics ######
###### by Daniel Tolman ######

namespace = pirates
normal_or_historical_nations = yes

# The Pirates of Algiers
country_event = {
	id = pirates.2
	title = "pirates.2.t"
	picture = SMUGGLERS_eventPicture
	desc = "pirates.2.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		NOT = { started_in = 1510.1.1 }
		NOT = { has_reform = pirate_republic_reform }
		NOT = { exists = ALG }
		is_year = 1500
		OR = {
			AND = {
				owns_core_province = 1946
				is_subject = no
				num_of_cities = 2
			}
			any_subject_country = {
				owns_core_province = 1946
				num_of_cities = 2
			}
		}
		OR = {
			1946 = {
				recent_treasure_ship_passage = yes
			}
			1946 = {
				privateer_power = { share = 5 }
			}
			any_country = {
				capital_scope = { superregion = africa_superregion }
				war_exhaustion = 5
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			1946 = {
				discover_country = ALG
				add_core = ALG
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = { # play as the pirates
		name = "pirates.2.a"
		# play as ALG
		trigger = { ai = no }
		1946 = { owner = { release = ALG } }
		ALG = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Khidr"
				dynasty = "Yakupoglu"
				culture = turkish
				fixed = yes
				adm = 3
				dip = 4
				mil = 5
			}
			swap_free_idea_group = yes
			set_ruler_flag = historical_pirate
			swap_non_generic_missions = yes
		}
		switch_tag = ALG
	}
	option = { # pirates get released
		name = "pirates.2.b"
		1946 = { owner = { release = ALG } }
		ALG = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Khidr"
				dynasty = "Yakupoglu"
				culture = turkish
				fixed = yes
				adm = 3
				dip = 4
				mil = 5
			}
			swap_free_idea_group = yes
			set_ruler_flag = historical_pirate
			swap_non_generic_missions = yes
		}
	}
}

# Mani
country_event = {
	id = pirates.3
	title = "pirates.3.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "pirates.3.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		NOT = { exists = XMI }
		NOT = { started_in = 1770.1.1 }
		NOT = { culture_group = byzantine }
		NOT = { has_reform = pirate_republic_reform }
		OR = {
			AND = {
				owns_core_province = 400
				is_subject = no
				num_of_cities = 2
			}
			any_subject_country = {
				owns_core_province = 400
				num_of_cities = 2
			}
		}
		OR = {
			400 = {
				recent_treasure_ship_passage = yes
			}
			400 = {
				privateer_power = { share = 1 }
			}
			any_country = {
				capital_scope = {
					OR = {
						region = hellas_region
						region = macedonia_region
						region = furthergreece_region
						region = thrace_region
						region = greekislands_region
					}
				}
				war_exhaustion = 5
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			every_province = {
				limit = { is_core = XMI }
				remove_core = XMI
			}
			400 = {
				discover_country = XMI
				add_core = XMI
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = { # play as the pirates
		name = "pirates.3.a"
		# play as XMI
		trigger = {
			ai = no
		}
		400 = {
			owner = {
				release = XMI
			}
		}
		XMI = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
		}
		switch_tag = XMI
	}
	option = { # pirates get released
		name = "pirates.3.b"
		400 = {
			owner = {
				release = XMI
			}
		}
		XMI = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			add_republican_tradition = 50
			adopt_reform_progress = ROOT
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
		}
	}
}

# Sale
country_event = {
	id = pirates.4
	title = "pirates.4.t"
	picture = BARBARY_PIRATES_eventPicture
	desc = "pirates.4.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		not = { exists = SLE }
		NOT = { has_reform = pirate_republic_reform }
		1212 = {
			owner = {
				culture_group = iberian
				religion_group = christian
			}
		}
		443 = {
			owner = {
				culture_group = iberian
				religion_group = christian
			}
		}
		owns_core_province = 4672
		num_of_cities = 2
		is_subject = no
		religion_group = muslim
		4672 = {
			privateer_power = { share = 5 }
		}
	}
	
	immediate = {
		hidden_effect = {
			every_province = {
				limit = { is_core = SLE }
				remove_core = SLE
			}
			4672 = {
				discover_country = SLE
				add_core = SLE
			}
			1212 = {
				owner = {
					save_event_target_as = spain_country
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
		# modifiers
	}
	
	option = { # play as the pirates
		name = "pirates.4.a"
		trigger = {
			ai = no
		}
		# play as SLE
		4672 = {
			add_base_tax = 2
			add_base_manpower = 2
		}
		release = SLE
		create_guarantee = SLE
		SLE = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			change_religion = ROOT
			change_primary_culture = ROOT
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Jan Janszoon" # Murat Reis
				dynasty = "van Haarlem"
				fixed = yes
				adm = 3
				dip = 3
				mil = 4
				culture = dutch
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
		switch_tag = SLE
	}
	option = { # pirates get released as a march
		name = "pirates.4.b"
		4672 = {
			add_base_tax = 2
			add_base_manpower = 2
		}
		release = SLE
		create_march = SLE
		SLE = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			change_religion = ROOT
			change_primary_culture = ROOT
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Jan Janszoon" # Murat Reis
				dynasty = "van Haarlem"
				fixed = yes
				adm = 3
				dip = 3
				mil = 4
				culture = dutch
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
	}
}

# Tetouan
country_event = {
	id = pirates.5
	title = "pirates.5.t"
	picture = BARBARY_PIRATES_eventPicture
	desc = "women_history_events.56.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		is_year = 1515
		NOT = { is_year = 1542 }
		NOT = { has_reform = pirate_republic_reform }
		NOT = { exists = TET }
		NOT = { exists = GRA }
		NOT = { exists = ADU }
		owns_core_province = 4629
		num_of_cities = 2
		is_subject = no
		religion_group = muslim
		4629 = {
			privateer_power = { share = 5 }
		}
		443 = {
			owner = {
				culture_group = iberian
				religion_group = christian
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			every_province = {
				limit = { is_core = TET }
				remove_core = TET
			}
			4629 = {
				discover_country = TET
				add_core = TET
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
		# modifiers
	}
	
	option = { # play as the pirates
		name = "pirates.5.a"
		trigger = {
			ai = no
		}
		4629 = {
			add_base_tax = 2
			add_base_manpower = 2
		}
		release = TET
		create_guarantee = TET
		TET = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			change_religion = ROOT
			change_primary_culture = andalucian
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Sa‘îda"
				dynasty = "Banû Râshid"
				culture = andalucian
				adm = 4
				dip = 4
				mil = 5
				female = yes
				fixed = yes
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
		switch_tag = TET
	}
	option = { # pirates get released as a march
		name = "pirates.5.b"
		4629 = {
			add_base_tax = 2
			add_base_manpower = 2
		}
		release = TET
		create_march = TET
		TET = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			change_religion = ROOT
			change_primary_culture = andalucian
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Sa‘îda"
				dynasty = "Banû Râshid"
				culture = andalucian
				adm = 4
				dip = 4
				mil = 5
				female = yes
				fixed = yes
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
	}
}

# The Pirates of Gotland
country_event = {
	id = pirates.6
	title = "pirates.6.t"
	picture = PIRATE_CAPTAINS_eventPicture
	desc = "pirates.6.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		NOT = { started_in = 1394.1.1 }
		NOT = { has_reform = pirate_republic_reform }
		NOT = { exists = GOT }
		is_year = 1390
		OR = {
			AND = {
				num_of_cities = 4
				owns_core_province = 2697
				owns_core_province = 6130
				owns_core_province = 6131
				is_subject = no
			}
			any_subject_country = {
				num_of_cities = 4
				owns_core_province = 2697
				owns_core_province = 6130
				owns_core_province = 6131
			}
		}
		OR = {
			2697 = {
				recent_treasure_ship_passage = yes
			}
			2697 = {
				trade_share = {
					country = ROOT
					share = 10
				}
			}
			any_country = {
				capital_scope = {
					superregion = scandinavia_superregion
				}
				war_exhaustion = 5
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			every_province = {
				limit = { is_core = GOT }
				remove_core = GOT
			}
			2697 = {
				discover_country = GOT
				add_core = GOT
			}
			6130 = {
				discover_country = GOT
				add_core = GOT
			}
			6131 = {
				discover_country = GOT
				add_core = GOT
			}
			random_country = {
				limit = {
					is_rival = ROOT
					any_subject_country = {
						any_owned_province = {
							OR = {
								superregion = scandinavia_superregion
								superregion = germanynorth_superregion
							}
						}
					}
				}
				save_event_target_as = spanish_main_country
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
		# modifiers
	}
	
	option = { # play as the pirates
		name = "pirates.6.a"
		trigger = {
			ai = no
		}
		2697 = {
			owner = {
				release = GOT
			}
		}
		GOT = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Klaus Störtebeker"
				mil = 2
				culture = pommeranian
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
		switch_tag = GOT
	}
	option = { # pirates get released
		name = "pirates.6.b"
		2697 = {
			owner = {
				release = GOT
			}
		}
		GOT = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Klaus Störtebeker"
				mil = 2
				culture = pommeranian
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
	}
}

# New England
country_event = {
	id = pirates.7
	title = "pirates.7.t"
	picture = BUCCANEERS_eventPicture
	desc = "pirates.7.d"
	
	fire_only_once = yes
	
	trigger = {
		has_dlc = "Golden Century"
		NOT = { is_year = 1100 }
		NOT = { started_in = 1091.1.1 }
		NOT = { has_reform = pirate_republic_reform }
		NOT = { exists = NEG }
		any_country = {
			OR = {
				has_disaster = revolt_of_the_earls
				has_country_flag = had_earls_revolt
			}
		}
		owns_core_province = 3730
		num_of_cities = 2
	}
	
	immediate = {
		hidden_effect = {
			3730 = {
				discover_country = NEG
				add_core = NEG
				change_religion = catholic
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = { # play as the pirates
		name = "pirates.7.a"
		trigger = {
			ai = no
		}
		release = NEG
		BYZ = {
			if = {
				limit = {
					ai = yes
				}
				create_guarantee = NEG
			}
		}
		NEG = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Sigeweard"
				dynasty = "of Gleawecastre"
				fixed = yes
				adm = 3
				dip = 3
				mil = 4
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
		switch_tag = NEG
	}
	option = { # pirates get released
		name = "pirates.7.b"
		release = NEG
		BYZ = {
			if = {
				limit = {
					ai = yes
				}
				create_guarantee = NEG
			}
		}
		NEG = {
			change_government = republic
			add_government_reform = pirate_republic_reform
			adopt_reform_progress = ROOT
			add_republican_tradition = 50
			capital_scope = {
				build_to_forcelimit = {
					infantry = 0.8
					artillery = 0.2
					heavy_ship = 0.3
					light_ship = 0.3
					transport = 0.3
				}
			}
			define_ruler = {
				name = "Sigeweard"
				dynasty = "of Gleawecastre"
				fixed = yes
				adm = 3
				dip = 3
				mil = 4
			}
			swap_free_idea_group = yes
			swap_non_generic_missions = yes
			set_ruler_flag = historical_pirate
		}
	}
}

# Poljica - Start of Piracy
country_event = {
	id = pirates.8
	title = "pirates.8.t"
	picture = SMUGGLERS_eventPicture
	desc = "pirates.8.d"
	
	fire_only_once = yes
	
	trigger = {
		tag = POJ
		NOT = { started_in = 1100.1.1 }
		is_year = 1080
		NOT = { is_year = 1110 }
		has_dlc = "Golden Century"
		NOT = { has_reform = pirate_republic_reform }
		owns_core_province = 1804
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = "pirates.8.a"
		change_government = republic
		add_government_reform = pirate_republic_reform
		add_republican_tradition = 50
		define_ruler = {
			culture = croatian
		}
		override_country_name = OMIS
		set_country_flag = is_pirates_of_omis_flag
		swap_non_generic_missions = yes
	}
	
	option = {
		name = "pirates.8.b"
		add_stability = -1
	}
}

# Pirates of Rugen
country_event = {
	id = pirates.22
	title = "pirates.22.name"
	picture = SMUGGLERS_eventPicture
	desc = "pirates.22.desc"
	
	fire_only_once = yes
	
	trigger = {
		tag = STL
		is_year = 1400
		has_dlc = "Golden Century"
		owns_core_province = 2641
		NOT = { num_of_cities = 2 } #must be an OPM
		OR = {
			ai = no
			is_subject = no
		}
		NOT = { has_reform = pirate_republic_reform }
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	option = {
		name = "pirates.22.a"
		change_government = republic
		add_government_reform = pirate_republic_reform
		define_ruler = {
			dynasty = "Störtebeker"
			culture = pommeranian
		}
		add_republican_tradition = 50
		swap_non_generic_missions = yes
		capital_scope = {
			galley = root
			galley = root
			galley = root
		}
		ai_chance = {
			factor = 1
		}
	}
	
	option = {
		name = "pirates.22.b"
		add_stability = 1
		ai_chance = {
			factor = 0
		}
	}
}
# Pirates of Penzance (by James Beaumont)
country_event = {
	id = pirates.23
	title = "pirates.23.t"
	picture = SMUGGLERS_eventPicture
	desc = "pirates.23.d"
	
	fire_only_once = yes
	
	trigger = {
		tag = CRN
		has_dlc = "Golden Century"
		num_ships_privateering = 3
		NOT = { has_reform = pirate_republic_reform }
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "pirates.23.a"
		ai_chance = {
			factor = 1
		}
		change_government = republic
		add_government_reform = pirate_republic_reform
		define_ruler = {
			dynasty = "Carter"
		}
		add_republican_tradition = 50
		set_ruler_flag = historical_pirate
		swap_non_generic_missions = yes
	}
	
	option = {
		name = "pirates.23.b"
		ai_chance = {
			factor = 1
		}
		2170 = { 
			spawn_rebels = {
				size = 1
				type = particularist_rebels
			}
		}
	}
}
# Gilbert and Sulivan references to appease Daniel (by James Beaumont)
country_event = {
	id = pirates.24
	title = "pirates.24.t"
	picture = SMUGGLERS_eventPicture
	desc = "pirates.24.d"
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			tag = CRN
			was_tag = CRN
		}
		has_dlc = "Golden Century"
		has_reform = pirate_republic_reform
		is_year = 1500
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	option = {
		name = "pirates.24.a"
		ai_chance = {
			factor = 1
		}
		define_advisor = {
			type = naval_reformer
			skill = 3
			name = "Gilbert Patter"
			cost_multiplier = 0.25
		}
	}
	
	option = {
		name = "pirates.24.b"
		ai_chance = {
			factor = 1
		}
		define_ruler = {
			name = "Gilbert"
			dynasty = "Patter"
			adm = 2
			dip = 2
			mil = 2
		}
	}
}