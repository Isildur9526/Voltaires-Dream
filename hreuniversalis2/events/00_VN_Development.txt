#Voltaire's Nightmare Development Events
namespace = dev_events

#Generic - Growth
province_event = {
	id = dev_events.1
	title = dev_events.1.t
	desc = dev_events.1.d
	picture = CITY_DEVELOPMENT_eventPicture

	goto = ROOT

	trigger = {
		NOT = { devastation = 0.01 }
		NOT = { development = 25 }
		NOT = {
			OR = {
				has_terrain = desert
				has_terrain = glacier
				has_terrain = jungle
			}
		}
		owner = { is_at_war = no }
		NOT = { 
			owner = { 
				OR = {
					government = tribal 
					government = native
				}
			} 
		}
		controlled_by = owner
		is_core = owner
		NOT = { has_province_flag = vn_province_rose }
		owner = {
			any_owned_province = {
				NOT = {
					OR = {
						has_province_modifier = dev_concentrated
						has_province_modifier = dev_dispersed
					}
				}
			}
		}
	}

	is_mtth_scaled_to_size = 1

	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 2.0
			development = 20
			NOT = { development = 25 }
		}
		modifier = {
			factor = 1.75
			development = 15
			NOT = { development = 20 }
		}
		modifier = {
			factor = 1.5
			development = 10
			NOT = { development = 15 }
		}
		modifier = {
			factor = 1.25
			development = 5
			NOT = { development = 10 }
		}
		modifier = {
			factor = 0.95
			has_dlc = "Mandate of Heaven"
			prosperity = 1
			NOT = { prosperity = 25 }
		}
		modifier = {
			factor = 0.9
			has_dlc = "Mandate of Heaven"
			prosperity = 25
			NOT = { prosperity = 50 }
		}
		modifier = {
			factor = 0.85
			has_dlc = "Mandate of Heaven"
			prosperity = 50
			NOT = { prosperity = 75 }
		}
		modifier = {
			factor = 0.8
			has_dlc = "Mandate of Heaven"
			prosperity = 75
			NOT = { prosperity = 100 }
		}
		modifier = {
			factor = 0.75
			has_dlc = "Mandate of Heaven"
			prosperity = 100
		}
		modifier = {
			factor = 0.9
			province_has_center_of_trade_of_level = 1
			NOT = { province_has_center_of_trade_of_level = 2 }
		}
		modifier = {
			factor = 0.8
			province_has_center_of_trade_of_level = 2
			NOT = { province_has_center_of_trade_of_level = 3 }
		}
		modifier = {
			factor = 0.7
			province_has_center_of_trade_of_level = 3
		}
		modifier = {
			factor = 0.9
			has_terrain = farmlands
		}
		modifier = {
			factor = 0.9
			is_capital = yes
		}
		modifier = {
			factor = 2.5
			OR = {
				has_terrain = coastal_desert
				has_terrain = hills
				has_terrain = woods
				is_island = yes
			}
			
		}
		modifier = {
			factor = 5.0
			OR = {
				has_terrain = marsh
				has_terrain = highlands
				has_terrain = drylands
				has_terrain = savannah
			}
		}
		modifier = {
			factor = 10.0
			OR = {
				has_terrain = mountain
				has_terrain = forest
			}
		}
	}

	immediate = {
		hidden_effect = {
			owner = { 
				save_event_target_as = dispersed_owner
				highest_monarch_skill_effect = yes 
			}
			random_neighbor_province = {
				limit = {
					owned_by = event_target:dispersed_owner
					NOT = {
						OR = {
							has_province_flag = dev_dispersed_prov1
							has_province_flag = dev_dispersed_prov2
						}
					}
					NOT = { 
						OR = {
							has_province_modifier = dev_dispersed 
							has_province_modifier = dev_concentrated
							has_province_flag = vn_province_rose
							has_province_flag = vn_province_rose_dispersed
						}
					}
				}
				set_province_flag = dev_dispersed_prov1
			}
			random_neighbor_province = {
				limit = {
					owned_by = event_target:dispersed_owner
					NOT = {
						OR = {
							has_province_flag = dev_dispersed_prov1
							has_province_flag = dev_dispersed_prov2
						}
					}
					NOT = { 
						OR = {
							has_province_modifier = dev_dispersed 
							has_province_modifier = dev_concentrated
							has_province_flag = vn_province_rose
							has_province_flag = vn_province_rose_dispersed
						}
					}
				}
				set_province_flag = dev_dispersed_prov2
			}
		}
	}

	option = {
		name = dev_events.1.a
		ai_chance = { factor = 25 }
		set_province_flag = vn_province_rose
		owner = {
			trigger_switch = {
				on_trigger = has_ruler_flag
				adm_highest = {
					PREV = {
						custom_tooltip = dev_events.1.a.tt1
						add_base_tax = 2
						random_list = {
							50 = {
								add_base_production = 1
							}
							50 = {
								add_base_manpower = 1
							}
						}
					}
				}
				dip_highest = {
					PREV = {
						custom_tooltip = dev_events.1.a.tt2
						add_base_production = 2
						random_list = {
							50 = {
								add_base_tax = 1
							}
							50 = {
								add_base_manpower = 1
							}
						}
					}
				}
				mil_highest = {
					PREV = {
						custom_tooltip = dev_events.1.a.tt3
						add_base_manpower = 2
						random_list = {
							50 = {
								add_base_tax = 1
							}
							50 = {
								add_base_production = 1
							}
						}
					}
				}
			}
		}
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = 25
		}
		add_province_modifier = {
			name = "dev_concentrated"
			duration = 3650
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_concentrated"
				duration = -1
			}
		}
		custom_tooltip = vn_province_rose.tt
	}
	option = {
		name = dev_events.1.b
		ai_chance = { 
			factor = 75
			modifier = {
				factor = 0
				NOT = { owner = { num_of_cities = 3 } }
			}
		}
		set_province_flag = vn_province_rose_dispersed
		add_scaled_local_adm_power = -10.0
		add_scaled_local_dip_power = -10.0
		add_scaled_local_mil_power = -10.0
		random_list = {
			33 = {
				add_base_tax = 1
			}
			33 = {
				add_base_production = 1
			}
			33 = {
				add_base_manpower = 1
			}
		}
		add_province_modifier = {
			name = "dev_dispersed"
			duration = 3650
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_dispersed"
				duration = -1
			}
		}
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = 10
		}
		custom_tooltip = vn_province_rose.tt
		random_neighbor_province = {
			limit = { 
				owned_by = event_target:dispersed_owner
				has_province_flag = dev_dispersed_prov1
			}
			set_province_flag = vn_province_rose_dispersed
			clr_province_flag = dev_dispersed_prov1
			random_list = {
				33 = {
					add_base_tax = 1
				}
				33 = {
					add_base_production = 1
				}
				33 = {
					add_base_manpower = 1
				}
			}
			add_province_modifier = {
				name = "dev_dispersed"
				duration = 3650
			}
			hidden_effect = {
				add_province_modifier = {	#for debug testing
					name = "debug_dispersed"
					duration = -1
				}
			}
		}
		random_neighbor_province = {
			limit = { 
				owned_by = event_target:dispersed_owner
				has_province_flag = dev_dispersed_prov2
			}
			set_province_flag = vn_province_rose_dispersed
			clr_province_flag = dev_dispersed_prov2
			random_list = {
				33 = {
					add_base_tax = 1
				}
				33 = {
					add_base_production = 1
				}
				33 = {
					add_base_manpower = 1
				}
			}
			add_province_modifier = {
				name = "dev_dispersed"
				duration = 3650
			}
			hidden_effect = {
				add_province_modifier = {	#for debug testing
					name = "debug_dispersed"
					duration = -1
				}
			}
		}
	}
}

#Generic - Decline
province_event = {
	id = dev_events.2
	title = dev_events.2.t
	desc = dev_events.2.d
	picture = FAMINE_eventPicture

	goto = ROOT

	trigger = {
		calc_true_if = {
			base_tax = 2
			base_production = 2
			base_manpower = 2
			amount = 2
		}
		development = 6
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			NOT = { prosperity = 100 }
		}
		owner = {
			any_owned_province = {
				NOT = {
					OR = {
						has_province_modifier = dev_crisis
						has_province_modifier = dev_lifesupport
					}
				}
			}
		}
		NOT = { has_province_flag = vn_province_fell }
	}

	is_mtth_scaled_to_size = 1

	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 0.5
			development = 50
		}
		modifier = {
			factor = 0.6
			development = 40
			NOT = { development = 50 }
		}
		modifier = {
			factor = 0.7
			development = 30
			NOT = { development = 40 }
		}
		modifier = {
			factor = 0.8
			development = 20
			NOT = { development = 30 }
		}
		modifier = {
			factor = 0.9
			development = 10
			NOT = { development = 20 }
		}
		modifier = {
			factor = 0.9
			devastation = 1
			NOT = { devastation = 25 }
		}
		modifier = {
			factor = 0.8
			devastation = 25
			NOT = { devastation = 50 }
		}
		modifier = {
			factor = 0.7
			devastation = 50
			NOT = { devastation = 75 }
		}
		modifier = {
			factor = 0.6
			devastation = 75
			NOT = { devastation = 100 }
		}
		modifier = {
			factor = 0.5
			devastation = 100
		}
		modifier = {
			factor = 1.25
			has_dlc = "Mandate of Heaven"
			prosperity = 1
			NOT = { prosperity = 25 }
		}
		modifier = {
			factor = 1.5
			has_dlc = "Mandate of Heaven"
			prosperity = 25
			NOT = { prosperity = 50 }
		}
		modifier = {
			factor = 1.75
			has_dlc = "Mandate of Heaven"
			prosperity = 50
			NOT = { prosperity = 75 }
		}
		modifier = {
			factor = 2.0
			has_dlc = "Mandate of Heaven"
			prosperity = 75
			NOT = { prosperity = 100 }
		}
		modifier = {
			factor = 0.9
			NOT = { controlled_by = owner }
		}
		modifier = {
			factor = 0.9
			owner = { is_at_war = yes }
		}
	}

	immediate = {
		hidden_effect = {
			set_province_flag = vn_province_fell
			owner = { highest_monarch_skill_effect = yes }
			if = {
				limit = {
					NOT = { base_tax = 2 }
				}
				set_province_flag = basetax_low
				add_base_production = -1
				add_base_manpower = -1
				random_list = {
					50 = {
						add_base_production = -1
					}
					50 = {
						add_base_manpower = -1
					}
				}
			}
			else_if = {
				limit = {
					NOT = { base_production = 2 }
				}
				set_province_flag = baseprod_low
				add_base_tax = -1
				add_base_manpower = -1
				random_list = {
					50 = {
						add_base_tax = -1
					}
					50 = {
						add_base_manpower = -1
					}
				}
			}
			else_if = {
				limit = {
					NOT = { base_manpower = 2 }
				}
				set_province_flag = baseman_low
				add_base_tax = -1
				add_base_production = -1
				random_list = {
					50 = {
						add_base_tax = -1
					}
					50 = {
						add_base_production = -1
					}
				}
			}
			else = {
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
			}
		}
	}

	option = {	
		name = dev_events.2.a
		ai_chance = { factor = 50 }
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = -25
		}
		custom_tooltip = dev_events.2.b.tt4
		tooltip = {
			if = {
				limit = {
					OR = {
						has_province_flag = basetax_low
						has_province_flag = baseprod_low
						has_province_flag = baseman_low
					}
				}
				trigger_switch = {
					on_trigger = has_province_flag
					basetax_low = {
						add_base_production = -1
						add_base_manpower = -1
						random_list = {
							50 = {
								add_base_production = -1
							}
							50 = {
								add_base_manpower = -1
							}
						}
					}
					baseprod_low = {
						add_base_tax = -1
						add_base_manpower = -1
						random_list = {
							50 = {
								add_base_tax = -1
							}
							50 = {
								add_base_manpower = -1
							}
						}
					}
					baseman_low = {
						add_base_tax = -1
						add_base_production = -1
						random_list = {
							50 = {
								add_base_tax = -1
							}
							50 = {
								add_base_production = -1
							}
						}
					}
				}
			}
			else = {
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
			}
		}
		custom_tooltip = dev_events.2.a.tt1
		add_province_modifier = {
			name = "dev_crisis"
			duration = 1825
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_crisis"
				duration = -1
			}
		}
		custom_tooltip = vn_province_fell.tt
	}
	option = {
		name = dev_events.2.b
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.5 } }
			}
			modifier = {
				factor = 0
				owner = { num_of_loans = 1 }
			}
			modifier = {
				factor = 0
				owner = { is_at_war = yes }
			}
		}
		custom_tooltip = dev_events.2.b.tt4
		tooltip = {
			if = {
				limit = {
					OR = {
						has_province_flag = basetax_low
						has_province_flag = baseprod_low
						has_province_flag = baseman_low
					}
				}
				trigger_switch = {
					on_trigger = has_province_flag
					basetax_low = {
						add_base_production = -1
						add_base_manpower = -1
						random_list = {
							50 = {
								add_base_production = -1
							}
							50 = {
								add_base_manpower = -1
							}
						}
					}
					baseprod_low = {
						add_base_tax = -1
						add_base_manpower = -1
						random_list = {
							50 = {
								add_base_tax = -1
							}
							50 = {
								add_base_manpower = -1
							}
						}
					}
					baseman_low = {
						add_base_tax = -1
						add_base_production = -1
						random_list = {
							50 = {
								add_base_tax = -1
							}
							50 = {
								add_base_production = -1
							}
						}
					}
				}
			}
			else = {
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
			}
		}
		custom_tooltip = dev_events.2.a.tt1
		owner = {
			trigger_switch = {
				on_trigger = has_ruler_flag
				adm_highest = {
					PREV = {
						custom_tooltip = dev_events.2.b.tt1
						add_base_tax = 1
					}
				}
				dip_highest = {
					PREV = {
						custom_tooltip = dev_events.2.b.tt2
						add_base_production = 1
					}
				}
				mil_highest = {
					PREV = {
						custom_tooltip = dev_events.2.b.tt3
						add_base_manpower = 1
					}
				}
			}
		}
		owner = { add_years_of_income = -0.25 }
		add_devastation = -10
		add_province_modifier = {
			name = "dev_lifesupport"
			duration = 1825
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_lifesupport"
				duration = -1
			}
		}
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = -10
		}
		custom_tooltip = vn_province_fell.tt
	}
	after = {
		clr_province_flag = basetax_low
		clr_province_flag = baseprod_low
		clr_province_flag = baseman_low
	}
}

#Historical Rise / Fall of Cities

#Rise of X
province_event = {
	id = dev_events.3
	title = dev_events.3.t
	desc = {
		#Paris
		trigger = { province_id = 548 }
		desc = dev_events.3.d1
	}
	desc = {
		#Salamanca
		trigger = { province_id = 2718 }
		desc = dev_events.3.d2
	}
	desc = {
		#Amsterdam
		trigger = { province_id = 328 }
		desc = dev_events.3.d3
	}
	desc = {
		#Madrid
		trigger = { province_id = 1236 }
		desc = dev_events.3.d4
	}
	desc = {
		#Marrakesh
		trigger = { province_id = 4762 }
		desc = dev_events.3.d5
	}
	desc = {
		#Antwerp
		trigger = { province_id = 2729 }
		desc = dev_events.3.d6
	}
	desc = {
		#Ghent
		trigger = { province_id = 90 }
		desc = dev_events.3.d7
	}
	desc = {
		#Brugges
		trigger = { province_id = 896 }
		desc = dev_events.3.d8
	}
	desc = {
		#Prague
		trigger = { province_id = 781 }
		desc = dev_events.3.d9
	}
	desc = {
		#Bremen
		trigger = { province_id = 429 }
		desc = dev_events.3.d10
	}
	desc = {
		#Hamburg
		trigger = { province_id = 1084 }
		desc = dev_events.3.d11
	}
	desc = {
		#Lubeck
		trigger = { province_id = 13 }
		desc = dev_events.3.d12
	}
	desc = {
		#Glasgow
		trigger = { province_id = 282 }
		desc = dev_events.3.d13
	}
	desc = {
		#Birmingham
		trigger = { province_id = 4693 }
		desc = dev_events.3.d14
	}
	desc = {
		#Manchester
		trigger = { province_id = 2247 }
		desc = dev_events.3.d15
	}
	desc = {
		#London
		trigger = { province_id = 2268 }
		desc = dev_events.3.d16
	}
	desc = {
		#Sevilla
		trigger = { province_id = 1867 }
		desc = dev_events.3.d17
	}
	desc = {
		#Lisboa
		trigger = { province_id = 1135 }
		desc = dev_events.3.d18
	}
	desc = {
		#Bergen
		trigger = { province_id = 6038 }
		desc = dev_events.3.d19
	}
	desc = {
		#Copenhagen
		trigger = { province_id = 411 }
		desc = dev_events.3.d20
	}
	desc = {
		#Stockholm
		trigger = { province_id = 6109 }
		desc = dev_events.3.d21
	}
	desc = {
		#Nantes
		trigger = { province_id = 2173 }
		desc = dev_events.3.d22
	}
	#x
	picture = GREAT_BUILDING_eventPicture

	goto = ROOT
	major = yes
	
	trigger = {
		controlled_by = owner
		is_core = owner
		NOT = { has_province_flag = vn_rise_major }
		NOT = { devastation = 0.01 }
		NOT = { development = 50 }
		OR = {
			#Paris
			AND = {
				province_id = 548
				universities = 100
				NOT = { guilds = 100 }
				owner = { has_institution = universities }
			}
			#Salamanca
			AND = {
				province_id = 2718
				universities = 100
				NOT = { guilds = 100 }
				owner = { has_institution = universities }
			}
			#Amsterdam
			AND = {
				province_id = 328
				global_trade = 100
				NOT = { manufactories = 100 }
				owner = { has_institution = global_trade }
			}
			#Madrid
			AND = {
				province_id = 1236
				printing_press = 100
				NOT = { global_trade = 100 }
				owner = { has_institution = printing_press }
			}
			#Marrakesh
			AND = {
				province_id = 4762
				feudalism = 100
				NOT = { investiture = 100 }
				owner = { has_institution = feudalism }
			}
			#Antwerp
			AND = {
				province_id = 2729
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Ghent
			AND = {
				province_id = 90
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Brugges
			AND = {
				province_id = 896
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Prague
			AND = {
				province_id = 781
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Bremen
			AND = {
				province_id = 429
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Hamburg
			AND = {
				province_id = 1084
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Lubeck
			AND = {
				province_id = 13
				guilds = 100
				NOT = { chivalry = 100 }
				owner = { has_institution = guilds }
			}
			#Glasgow
			AND = {
				province_id = 282
				liberalism = 100
				owner = { has_institution = liberalism }
			}
			#Birmingham
			AND = {
				province_id = 4693
				industrialism = 100
				NOT = { liberalism = 100 }
				owner = { has_institution = industrialism }
			}
			#Manchester
			AND = {
				province_id = 2247
				liberalism = 100
				owner = { has_institution = liberalism }
			}
			#London
			AND = {
				province_id = 2268
				enlightenment = 100
				NOT = { industrialism = 100 }
				owner = { has_institution = enlightenment }
			}
			#Sevilla
			AND = {
				province_id = 1867
				new_world_i = 100
				NOT = { printing_press = 100 }
				owner = { has_institution = new_world_i }
			}
			#Lisboa
			AND = {
				province_id = 1135
				new_world_i = 100
				NOT = { printing_press = 100 }
				owner = { has_institution = new_world_i }
			}
			#Bergen
			AND = {
				province_id = 6038
				chivalry = 100
				NOT = { publichealth = 100 }
				owner = { has_institution = chivalry }
			}
			#Copenhagen
			AND = {
				province_id = 411
				chivalry = 100
				NOT = { publichealth = 100 }
				owner = { has_institution = chivalry }
			}
			#Stockholm
			AND = {
				province_id = 6109
				chivalry = 100
				NOT = { publichealth = 100 }
				owner = { has_institution = chivalry }
			}
			#Nantes
			AND = {
				province_id = 2173
				manufactories = 100
				NOT = { enlightenment = 100 }
				owner = { has_institution = manufactories }
			}
			#x
		}
	}

	mean_time_to_happen = {
		months = 600
		modifier = {
			factor = 2.0
			development = 40
			NOT = { development = 50 }
		}
		modifier = {
			factor = 1.75
			development = 30
			NOT = { development = 40 }
		}
		modifier = {
			factor = 1.5
			development = 20
			NOT = { development = 30 }
		}
		modifier = {
			factor = 1.25
			development = 10
			NOT = { development = 20 }
		}
		modifier = {
			factor = 0.95
			has_dlc = "Mandate of Heaven"
			prosperity = 1
			NOT = { prosperity = 25 }
		}
		modifier = {
			factor = 0.9
			has_dlc = "Mandate of Heaven"
			prosperity = 25
			NOT = { prosperity = 50 }
		}
		modifier = {
			factor = 0.85
			has_dlc = "Mandate of Heaven"
			prosperity = 50
			NOT = { prosperity = 75 }
		}
		modifier = {
			factor = 0.8
			has_dlc = "Mandate of Heaven"
			prosperity = 75
			NOT = { prosperity = 100 }
		}
		modifier = {
			factor = 0.75
			has_dlc = "Mandate of Heaven"
			prosperity = 100
		}
		modifier = {
			factor = 0.9
			is_capital = yes
		}
	}

	immediate = {
		if = {
			limit = { tag = FLA }
			hidden_effect = {
				set_global_flag = fla_province_rise_event
			}
		}
		hidden_effect = {
			set_province_flag = vn_rise_major
			set_province_flag = vn_province_rose
			owner = { save_event_target_as = rise_owner_country }
		}
	}

	option = {
		name = dev_events.3.a
		ai_chance = { factor = 100 }
		add_base_tax = 2
		add_base_production = 2
		add_base_manpower = 2
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = 25
		}
		if = {	
			limit = { 
				has_dlc = "Dharma" 
				province_has_center_of_trade_of_level = 1
				NOT = { province_has_center_of_trade_of_level = 3 }
			}
			add_center_of_trade_level = 1
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_major_rise"
				duration = -1
			}
		}
	}
}

#Fall of X
province_event = {
	id = dev_events.4
	title = dev_events.4.t
	desc = {
		#Constantinople
		trigger = { province_id = 2233 }
		desc = dev_events.4.d1
	}
	desc = {
		#Amalfi
		trigger = { province_id = 2880 }
		desc = dev_events.4.d2
	}
	#x
	picture = PLAGUE_eventPicture

	goto = ROOT
	major = yes

	trigger = {
		NOT = { prosperity = 100 }
		devastation = 0.1
		base_tax = 3
		base_production = 3
		base_manpower = 3
		NOT = { has_province_flag = vn_fall_major }
		OR = {
			#Constantinople
			AND = {
				province_id = 2233
				has_global_flag = constantinople_delivered
			}
			#Amalfi
			AND = {
				province_id = 2880
				is_year = 1150
				NOT = { is_year = 1350 }
			}
			#x
		}
	}

	mean_time_to_happen = {
		months = 600
		modifier = {
			factor = 0.7
			development = 50
		}
		modifier = {
			factor = 0.75
			development = 40
			NOT = { development = 50 }
		}
		modifier = {
			factor = 0.8
			development = 30
			NOT = { development = 40 }
		}
		modifier = {
			factor = 0.85
			development = 20
			NOT = { development = 30 }
		}
		modifier = {
			factor = 0.9
			development = 10
			NOT = { development = 20 }
		}
		modifier = {
			factor = 0.9
			devastation = 1
			NOT = { devastation = 25 }
		}
		modifier = {
			factor = 0.85
			devastation = 25
			NOT = { devastation = 50 }
		}
		modifier = {
			factor = 0.8
			devastation = 50
			NOT = { devastation = 75 }
		}
		modifier = {
			factor = 0.75
			devastation = 75
		}
		modifier = {
			factor = 1.1
			has_dlc = "Mandate of Heaven"
			prosperity = 1
			NOT = { prosperity = 25 }
		}
		modifier = {
			factor = 1.15
			has_dlc = "Mandate of Heaven"
			prosperity = 25
			NOT = { prosperity = 50 }
		}
		modifier = {
			factor = 1.2
			has_dlc = "Mandate of Heaven"
			prosperity = 50
			NOT = { prosperity = 75 }
		}
		modifier = {
			factor = 1.25
			has_dlc = "Mandate of Heaven"
			prosperity = 75
			NOT = { prosperity = 100 }
		}
		modifier = {
			factor = 0.9
			NOT = { controlled_by = owner }
		}
		modifier = {
			factor = 0.9
			owner = { is_at_war = yes }
		}
	}

	immediate = {
		hidden_effect = {
			set_province_flag = vn_fall_major
			set_province_flag = vn_province_fell
			owner = { save_event_target_as = fall_owner_country }
		}
	}

	option = {
		name = dev_events.4.a
		ai_chance = { factor = 100 }
		add_base_tax = -2
		add_base_production = -2
		add_base_manpower = -2
		add_devastation = 25
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = -25
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_major_fall"
				duration = -1
			}
		}
	}
}

#Destruction of X (Siege)
province_event = {
	id = dev_events.5
	title = dev_events.5.t
	desc = {
		#Baghdad
		trigger = { 
			province_id = 6301
			FROM = { primary_culture = mongol }
		}
		desc = dev_events.5.d1
	}
	#x
	picture = SIEGE_eventPicture

	goto = ROOT
	is_triggered_only = yes
	major = yes

	trigger = {
		owned_by = ROOT
		NOT = { has_province_flag = vn_fall_major }
		base_tax = 4
		base_production = 4
		base_manpower = 4
		OR = {
			#Baghdad
			AND = {
				province_id = 6301
				FROM = {
					primary_culture = mongol
				}
			}
			#x
		}
	}

	immediate = {
		hidden_effect = {
			set_province_flag = vn_fall_major
			set_province_flag = vn_province_fell
			owner = { save_event_target_as = destruction_owner_country }
		}
	}

	option = {
		name = dev_events.5.a
		ai_chance = { factor = 100 }
		add_base_tax = -3
		add_base_production = -3
		add_base_manpower = -3
		add_devastation = 100
		if = {
			limit = { has_dlc = "Mandate of Heaven" }
			add_prosperity = -100
		}
		hidden_effect = {
			add_province_modifier = {	#for debug testing
				name = "debug_major_destruction"
				duration = -1
			}
		}
		owner = { add_prestige = -50 }
	}
}
